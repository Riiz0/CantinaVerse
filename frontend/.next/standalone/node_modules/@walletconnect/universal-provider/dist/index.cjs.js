"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Aa=require("@walletconnect/sign-client"),nt=require("@walletconnect/utils"),Ia=require("@walletconnect/logger"),xa=require("@walletconnect/jsonrpc-http-connection"),kt=require("@walletconnect/jsonrpc-provider"),$g=require("events"),qg=require("@walletconnect/jsonrpc-utils");function qi(P){return P&&typeof P=="object"&&"default"in P?P:{default:P}}var Ug=qi(Aa),ln=qi(xa),Fg=qi($g);const Ea="error",Wg="wss://relay.walletconnect.com",Mg="wc",Bg="universal_provider",ya=`${Mg}@2:${Bg}:`,Gg="https://rpc.walletconnect.com/v1/",Jn="generic",Ft={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var _e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ui={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(P,s){(function(){var i,p="4.17.21",w=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",R="Expected a function",k="Invalid `variable` option passed into `_.template`",tn="__lodash_hash_undefined__",Yn=500,En="__lodash_placeholder__",Lt=1,Wt=2,yn=4,Sn=1,me=2,_t=1,pn=2,Gi=4,Nt=8,On=16,Dt=32,Rn=64,Mt=128,Zn=256,gr=512,Fa=30,Wa="...",Ma=800,Ba=16,Ki=1,Ga=2,Ka=3,dn=1/0,nn=9007199254740991,za=17976931348623157e292,we=0/0,Ht=4294967295,Ja=Ht-1,Ya=Ht>>>1,Za=[["ary",Mt],["bind",_t],["bindKey",pn],["curry",Nt],["curryRight",On],["flip",gr],["partial",Dt],["partialRight",Rn],["rearg",Zn]],bn="[object Arguments]",Pe="[object Array]",Xa="[object AsyncFunction]",Xn="[object Boolean]",Qn="[object Date]",Qa="[object DOMException]",Ce="[object Error]",Ae="[object Function]",zi="[object GeneratorFunction]",yt="[object Map]",Vn="[object Number]",Va="[object Null]",Bt="[object Object]",Ji="[object Promise]",ka="[object Proxy]",kn="[object RegExp]",St="[object Set]",jn="[object String]",Ie="[object Symbol]",ja="[object Undefined]",te="[object WeakMap]",to="[object WeakSet]",ne="[object ArrayBuffer]",Tn="[object DataView]",vr="[object Float32Array]",_r="[object Float64Array]",mr="[object Int8Array]",wr="[object Int16Array]",Pr="[object Int32Array]",Cr="[object Uint8Array]",Ar="[object Uint8ClampedArray]",Ir="[object Uint16Array]",xr="[object Uint32Array]",no=/\b__p \+= '';/g,eo=/\b(__p \+=) '' \+/g,ro=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yi=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,io=RegExp(Yi.source),so=RegExp(Zi.source),uo=/<%-([\s\S]+?)%>/g,ao=/<%([\s\S]+?)%>/g,Xi=/<%=([\s\S]+?)%>/g,oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fo=/^\w*$/,co=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/[\\^$.*+?()[\]{}|]/g,ho=RegExp(Er.source),yr=/^\s+/,lo=/\s/,po=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,go=/\{\n\/\* \[wrapped with (.+)\] \*/,vo=/,? & /,_o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mo=/[()=,{}\[\]\/\s]/,wo=/\\(\\)?/g,Po=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qi=/\w*$/,Co=/^[-+]0x[0-9a-f]+$/i,Ao=/^0b[01]+$/i,Io=/^\[object .+?Constructor\]$/,xo=/^0o[0-7]+$/i,Eo=/^(?:0|[1-9]\d*)$/,yo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,So=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",Oo="\\u0300-\\u036f",Ro="\\ufe20-\\ufe2f",bo="\\u20d0-\\u20ff",Vi=Oo+Ro+bo,ki="\\u2700-\\u27bf",ji="a-z\\xdf-\\xf6\\xf8-\\xff",To="\\xac\\xb1\\xd7\\xf7",Lo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",No="\\u2000-\\u206f",Do=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ts="A-Z\\xc0-\\xd6\\xd8-\\xde",ns="\\ufe0e\\ufe0f",es=To+Lo+No+Do,Sr="['\u2019]",Ho="["+Ee+"]",rs="["+es+"]",ye="["+Vi+"]",is="\\d+",$o="["+ki+"]",ss="["+ji+"]",us="[^"+Ee+es+is+ki+ji+ts+"]",Or="\\ud83c[\\udffb-\\udfff]",qo="(?:"+ye+"|"+Or+")",as="[^"+Ee+"]",Rr="(?:\\ud83c[\\udde6-\\uddff]){2}",br="[\\ud800-\\udbff][\\udc00-\\udfff]",Ln="["+ts+"]",os="\\u200d",fs="(?:"+ss+"|"+us+")",Uo="(?:"+Ln+"|"+us+")",cs="(?:"+Sr+"(?:d|ll|m|re|s|t|ve))?",hs="(?:"+Sr+"(?:D|LL|M|RE|S|T|VE))?",ls=qo+"?",ps="["+ns+"]?",Fo="(?:"+os+"(?:"+[as,Rr,br].join("|")+")"+ps+ls+")*",Wo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ds=ps+ls+Fo,Bo="(?:"+[$o,Rr,br].join("|")+")"+ds,Go="(?:"+[as+ye+"?",ye,Rr,br,Ho].join("|")+")",Ko=RegExp(Sr,"g"),zo=RegExp(ye,"g"),Tr=RegExp(Or+"(?="+Or+")|"+Go+ds,"g"),Jo=RegExp([Ln+"?"+ss+"+"+cs+"(?="+[rs,Ln,"$"].join("|")+")",Uo+"+"+hs+"(?="+[rs,Ln+fs,"$"].join("|")+")",Ln+"?"+fs+"+"+cs,Ln+"+"+hs,Mo,Wo,is,Bo].join("|"),"g"),Yo=RegExp("["+os+Ee+Vi+ns+"]"),Zo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qo=-1,G={};G[vr]=G[_r]=G[mr]=G[wr]=G[Pr]=G[Cr]=G[Ar]=G[Ir]=G[xr]=!0,G[bn]=G[Pe]=G[ne]=G[Xn]=G[Tn]=G[Qn]=G[Ce]=G[Ae]=G[yt]=G[Vn]=G[Bt]=G[kn]=G[St]=G[jn]=G[te]=!1;var B={};B[bn]=B[Pe]=B[ne]=B[Tn]=B[Xn]=B[Qn]=B[vr]=B[_r]=B[mr]=B[wr]=B[Pr]=B[yt]=B[Vn]=B[Bt]=B[kn]=B[St]=B[jn]=B[Ie]=B[Cr]=B[Ar]=B[Ir]=B[xr]=!0,B[Ce]=B[Ae]=B[te]=!1;var Vo={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ko={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nf=parseFloat,ef=parseInt,gs=typeof _e=="object"&&_e&&_e.Object===Object&&_e,rf=typeof self=="object"&&self&&self.Object===Object&&self,j=gs||rf||Function("return this")(),Lr=s&&!s.nodeType&&s,gn=Lr&&!0&&P&&!P.nodeType&&P,vs=gn&&gn.exports===Lr,Nr=vs&&gs.process,mt=function(){try{var h=gn&&gn.require&&gn.require("util").types;return h||Nr&&Nr.binding&&Nr.binding("util")}catch{}}(),_s=mt&&mt.isArrayBuffer,ms=mt&&mt.isDate,ws=mt&&mt.isMap,Ps=mt&&mt.isRegExp,Cs=mt&&mt.isSet,As=mt&&mt.isTypedArray;function ht(h,g,d){switch(d.length){case 0:return h.call(g);case 1:return h.call(g,d[0]);case 2:return h.call(g,d[0],d[1]);case 3:return h.call(g,d[0],d[1],d[2])}return h.apply(g,d)}function sf(h,g,d,A){for(var O=-1,q=h==null?0:h.length;++O<q;){var X=h[O];g(A,X,d(X),h)}return A}function wt(h,g){for(var d=-1,A=h==null?0:h.length;++d<A&&g(h[d],d,h)!==!1;);return h}function uf(h,g){for(var d=h==null?0:h.length;d--&&g(h[d],d,h)!==!1;);return h}function Is(h,g){for(var d=-1,A=h==null?0:h.length;++d<A;)if(!g(h[d],d,h))return!1;return!0}function en(h,g){for(var d=-1,A=h==null?0:h.length,O=0,q=[];++d<A;){var X=h[d];g(X,d,h)&&(q[O++]=X)}return q}function Se(h,g){var d=h==null?0:h.length;return!!d&&Nn(h,g,0)>-1}function Dr(h,g,d){for(var A=-1,O=h==null?0:h.length;++A<O;)if(d(g,h[A]))return!0;return!1}function K(h,g){for(var d=-1,A=h==null?0:h.length,O=Array(A);++d<A;)O[d]=g(h[d],d,h);return O}function rn(h,g){for(var d=-1,A=g.length,O=h.length;++d<A;)h[O+d]=g[d];return h}function Hr(h,g,d,A){var O=-1,q=h==null?0:h.length;for(A&&q&&(d=h[++O]);++O<q;)d=g(d,h[O],O,h);return d}function af(h,g,d,A){var O=h==null?0:h.length;for(A&&O&&(d=h[--O]);O--;)d=g(d,h[O],O,h);return d}function $r(h,g){for(var d=-1,A=h==null?0:h.length;++d<A;)if(g(h[d],d,h))return!0;return!1}var of=qr("length");function ff(h){return h.split("")}function cf(h){return h.match(_o)||[]}function xs(h,g,d){var A;return d(h,function(O,q,X){if(g(O,q,X))return A=q,!1}),A}function Oe(h,g,d,A){for(var O=h.length,q=d+(A?1:-1);A?q--:++q<O;)if(g(h[q],q,h))return q;return-1}function Nn(h,g,d){return g===g?Af(h,g,d):Oe(h,Es,d)}function hf(h,g,d,A){for(var O=d-1,q=h.length;++O<q;)if(A(h[O],g))return O;return-1}function Es(h){return h!==h}function ys(h,g){var d=h==null?0:h.length;return d?Fr(h,g)/d:we}function qr(h){return function(g){return g==null?i:g[h]}}function Ur(h){return function(g){return h==null?i:h[g]}}function Ss(h,g,d,A,O){return O(h,function(q,X,W){d=A?(A=!1,q):g(d,q,X,W)}),d}function lf(h,g){var d=h.length;for(h.sort(g);d--;)h[d]=h[d].value;return h}function Fr(h,g){for(var d,A=-1,O=h.length;++A<O;){var q=g(h[A]);q!==i&&(d=d===i?q:d+q)}return d}function Wr(h,g){for(var d=-1,A=Array(h);++d<h;)A[d]=g(d);return A}function pf(h,g){return K(g,function(d){return[d,h[d]]})}function Os(h){return h&&h.slice(0,Ls(h)+1).replace(yr,"")}function lt(h){return function(g){return h(g)}}function Mr(h,g){return K(g,function(d){return h[d]})}function ee(h,g){return h.has(g)}function Rs(h,g){for(var d=-1,A=h.length;++d<A&&Nn(g,h[d],0)>-1;);return d}function bs(h,g){for(var d=h.length;d--&&Nn(g,h[d],0)>-1;);return d}function df(h,g){for(var d=h.length,A=0;d--;)h[d]===g&&++A;return A}var gf=Ur(Vo),vf=Ur(ko);function _f(h){return"\\"+tf[h]}function mf(h,g){return h==null?i:h[g]}function Dn(h){return Yo.test(h)}function wf(h){return Zo.test(h)}function Pf(h){for(var g,d=[];!(g=h.next()).done;)d.push(g.value);return d}function Br(h){var g=-1,d=Array(h.size);return h.forEach(function(A,O){d[++g]=[O,A]}),d}function Ts(h,g){return function(d){return h(g(d))}}function sn(h,g){for(var d=-1,A=h.length,O=0,q=[];++d<A;){var X=h[d];(X===g||X===En)&&(h[d]=En,q[O++]=d)}return q}function Re(h){var g=-1,d=Array(h.size);return h.forEach(function(A){d[++g]=A}),d}function Cf(h){var g=-1,d=Array(h.size);return h.forEach(function(A){d[++g]=[A,A]}),d}function Af(h,g,d){for(var A=d-1,O=h.length;++A<O;)if(h[A]===g)return A;return-1}function If(h,g,d){for(var A=d+1;A--;)if(h[A]===g)return A;return A}function Hn(h){return Dn(h)?Ef(h):of(h)}function Ot(h){return Dn(h)?yf(h):ff(h)}function Ls(h){for(var g=h.length;g--&&lo.test(h.charAt(g)););return g}var xf=Ur(jo);function Ef(h){for(var g=Tr.lastIndex=0;Tr.test(h);)++g;return g}function yf(h){return h.match(Tr)||[]}function Sf(h){return h.match(Jo)||[]}var Of=function h(g){g=g==null?j:$n.defaults(j.Object(),g,$n.pick(j,Xo));var d=g.Array,A=g.Date,O=g.Error,q=g.Function,X=g.Math,W=g.Object,Gr=g.RegExp,Rf=g.String,Pt=g.TypeError,be=d.prototype,bf=q.prototype,qn=W.prototype,Te=g["__core-js_shared__"],Le=bf.toString,F=qn.hasOwnProperty,Tf=0,Ns=function(){var t=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ne=qn.toString,Lf=Le.call(W),Nf=j._,Df=Gr("^"+Le.call(F).replace(Er,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=vs?g.Buffer:i,un=g.Symbol,He=g.Uint8Array,Ds=De?De.allocUnsafe:i,$e=Ts(W.getPrototypeOf,W),Hs=W.create,$s=qn.propertyIsEnumerable,qe=be.splice,qs=un?un.isConcatSpreadable:i,re=un?un.iterator:i,vn=un?un.toStringTag:i,Ue=function(){try{var t=Cn(W,"defineProperty");return t({},"",{}),t}catch{}}(),Hf=g.clearTimeout!==j.clearTimeout&&g.clearTimeout,$f=A&&A.now!==j.Date.now&&A.now,qf=g.setTimeout!==j.setTimeout&&g.setTimeout,Fe=X.ceil,We=X.floor,Kr=W.getOwnPropertySymbols,Uf=De?De.isBuffer:i,Us=g.isFinite,Ff=be.join,Wf=Ts(W.keys,W),Q=X.max,et=X.min,Mf=A.now,Bf=g.parseInt,Fs=X.random,Gf=be.reverse,zr=Cn(g,"DataView"),ie=Cn(g,"Map"),Jr=Cn(g,"Promise"),Un=Cn(g,"Set"),se=Cn(g,"WeakMap"),ue=Cn(W,"create"),Me=se&&new se,Fn={},Kf=An(zr),zf=An(ie),Jf=An(Jr),Yf=An(Un),Zf=An(se),Be=un?un.prototype:i,ae=Be?Be.valueOf:i,Ws=Be?Be.toString:i;function a(t){if(J(t)&&!b(t)&&!(t instanceof H)){if(t instanceof Ct)return t;if(F.call(t,"__wrapped__"))return Mu(t)}return new Ct(t)}var Wn=function(){function t(){}return function(n){if(!z(n))return{};if(Hs)return Hs(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function Ge(){}function Ct(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}a.templateSettings={escape:uo,evaluate:ao,interpolate:Xi,variable:"",imports:{_:a}},a.prototype=Ge.prototype,a.prototype.constructor=a,Ct.prototype=Wn(Ge.prototype),Ct.prototype.constructor=Ct;function H(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ht,this.__views__=[]}function Xf(){var t=new H(this.__wrapped__);return t.__actions__=at(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=at(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=at(this.__views__),t}function Qf(){if(this.__filtered__){var t=new H(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Vf(){var t=this.__wrapped__.value(),n=this.__dir__,e=b(t),r=n<0,u=e?t.length:0,o=fh(0,u,this.__views__),f=o.start,c=o.end,l=c-f,v=r?c:f-1,_=this.__iteratees__,m=_.length,C=0,I=et(l,this.__takeCount__);if(!e||!r&&u==l&&I==l)return cu(t,this.__actions__);var y=[];t:for(;l--&&C<I;){v+=n;for(var L=-1,S=t[v];++L<m;){var D=_[L],$=D.iteratee,gt=D.type,ut=$(S);if(gt==Ga)S=ut;else if(!ut){if(gt==Ki)continue t;break t}}y[C++]=S}return y}H.prototype=Wn(Ge.prototype),H.prototype.constructor=H;function _n(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function kf(){this.__data__=ue?ue(null):{},this.size=0}function jf(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function tc(t){var n=this.__data__;if(ue){var e=n[t];return e===tn?i:e}return F.call(n,t)?n[t]:i}function nc(t){var n=this.__data__;return ue?n[t]!==i:F.call(n,t)}function ec(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ue&&n===i?tn:n,this}_n.prototype.clear=kf,_n.prototype.delete=jf,_n.prototype.get=tc,_n.prototype.has=nc,_n.prototype.set=ec;function Gt(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function rc(){this.__data__=[],this.size=0}function ic(t){var n=this.__data__,e=Ke(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():qe.call(n,e,1),--this.size,!0}function sc(t){var n=this.__data__,e=Ke(n,t);return e<0?i:n[e][1]}function uc(t){return Ke(this.__data__,t)>-1}function ac(t,n){var e=this.__data__,r=Ke(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}Gt.prototype.clear=rc,Gt.prototype.delete=ic,Gt.prototype.get=sc,Gt.prototype.has=uc,Gt.prototype.set=ac;function Kt(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function oc(){this.size=0,this.__data__={hash:new _n,map:new(ie||Gt),string:new _n}}function fc(t){var n=er(this,t).delete(t);return this.size-=n?1:0,n}function cc(t){return er(this,t).get(t)}function hc(t){return er(this,t).has(t)}function lc(t,n){var e=er(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}Kt.prototype.clear=oc,Kt.prototype.delete=fc,Kt.prototype.get=cc,Kt.prototype.has=hc,Kt.prototype.set=lc;function mn(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new Kt;++n<e;)this.add(t[n])}function pc(t){return this.__data__.set(t,tn),this}function dc(t){return this.__data__.has(t)}mn.prototype.add=mn.prototype.push=pc,mn.prototype.has=dc;function Rt(t){var n=this.__data__=new Gt(t);this.size=n.size}function gc(){this.__data__=new Gt,this.size=0}function vc(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function _c(t){return this.__data__.get(t)}function mc(t){return this.__data__.has(t)}function wc(t,n){var e=this.__data__;if(e instanceof Gt){var r=e.__data__;if(!ie||r.length<w-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new Kt(r)}return e.set(t,n),this.size=e.size,this}Rt.prototype.clear=gc,Rt.prototype.delete=vc,Rt.prototype.get=_c,Rt.prototype.has=mc,Rt.prototype.set=wc;function Ms(t,n){var e=b(t),r=!e&&In(t),u=!e&&!r&&hn(t),o=!e&&!r&&!u&&Kn(t),f=e||r||u||o,c=f?Wr(t.length,Rf):[],l=c.length;for(var v in t)(n||F.call(t,v))&&!(f&&(v=="length"||u&&(v=="offset"||v=="parent")||o&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||Zt(v,l)))&&c.push(v);return c}function Bs(t){var n=t.length;return n?t[ri(0,n-1)]:i}function Pc(t,n){return rr(at(t),wn(n,0,t.length))}function Cc(t){return rr(at(t))}function Yr(t,n,e){(e!==i&&!bt(t[n],e)||e===i&&!(n in t))&&zt(t,n,e)}function oe(t,n,e){var r=t[n];(!(F.call(t,n)&&bt(r,e))||e===i&&!(n in t))&&zt(t,n,e)}function Ke(t,n){for(var e=t.length;e--;)if(bt(t[e][0],n))return e;return-1}function Ac(t,n,e,r){return an(t,function(u,o,f){n(r,u,e(u),f)}),r}function Gs(t,n){return t&&qt(n,V(n),t)}function Ic(t,n){return t&&qt(n,ft(n),t)}function zt(t,n,e){n=="__proto__"&&Ue?Ue(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Zr(t,n){for(var e=-1,r=n.length,u=d(r),o=t==null;++e<r;)u[e]=o?i:Oi(t,n[e]);return u}function wn(t,n,e){return t===t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function At(t,n,e,r,u,o){var f,c=n&Lt,l=n&Wt,v=n&yn;if(e&&(f=u?e(t,r,u,o):e(t)),f!==i)return f;if(!z(t))return t;var _=b(t);if(_){if(f=hh(t),!c)return at(t,f)}else{var m=rt(t),C=m==Ae||m==zi;if(hn(t))return pu(t,c);if(m==Bt||m==bn||C&&!u){if(f=l||C?{}:Lu(t),!c)return l?th(t,Ic(f,t)):jc(t,Gs(f,t))}else{if(!B[m])return u?t:{};f=lh(t,m,c)}}o||(o=new Rt);var I=o.get(t);if(I)return I;o.set(t,f),aa(t)?t.forEach(function(S){f.add(At(S,n,e,S,t,o))}):sa(t)&&t.forEach(function(S,D){f.set(D,At(S,n,e,D,t,o))});var y=v?l?di:pi:l?ft:V,L=_?i:y(t);return wt(L||t,function(S,D){L&&(D=S,S=t[D]),oe(f,D,At(S,n,e,D,t,o))}),f}function xc(t){var n=V(t);return function(e){return Ks(e,t,n)}}function Ks(t,n,e){var r=e.length;if(t==null)return!r;for(t=W(t);r--;){var u=e[r],o=n[u],f=t[u];if(f===i&&!(u in t)||!o(f))return!1}return!0}function zs(t,n,e){if(typeof t!="function")throw new Pt(R);return ge(function(){t.apply(i,e)},n)}function fe(t,n,e,r){var u=-1,o=Se,f=!0,c=t.length,l=[],v=n.length;if(!c)return l;e&&(n=K(n,lt(e))),r?(o=Dr,f=!1):n.length>=w&&(o=ee,f=!1,n=new mn(n));t:for(;++u<c;){var _=t[u],m=e==null?_:e(_);if(_=r||_!==0?_:0,f&&m===m){for(var C=v;C--;)if(n[C]===m)continue t;l.push(_)}else o(n,m,r)||l.push(_)}return l}var an=mu($t),Js=mu(Qr,!0);function Ec(t,n){var e=!0;return an(t,function(r,u,o){return e=!!n(r,u,o),e}),e}function ze(t,n,e){for(var r=-1,u=t.length;++r<u;){var o=t[r],f=n(o);if(f!=null&&(c===i?f===f&&!dt(f):e(f,c)))var c=f,l=o}return l}function yc(t,n,e,r){var u=t.length;for(e=T(e),e<0&&(e=-e>u?0:u+e),r=r===i||r>u?u:T(r),r<0&&(r+=u),r=e>r?0:fa(r);e<r;)t[e++]=n;return t}function Ys(t,n){var e=[];return an(t,function(r,u,o){n(r,u,o)&&e.push(r)}),e}function tt(t,n,e,r,u){var o=-1,f=t.length;for(e||(e=dh),u||(u=[]);++o<f;){var c=t[o];n>0&&e(c)?n>1?tt(c,n-1,e,r,u):rn(u,c):r||(u[u.length]=c)}return u}var Xr=wu(),Zs=wu(!0);function $t(t,n){return t&&Xr(t,n,V)}function Qr(t,n){return t&&Zs(t,n,V)}function Je(t,n){return en(n,function(e){return Xt(t[e])})}function Pn(t,n){n=fn(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[Ut(n[e++])];return e&&e==r?t:i}function Xs(t,n,e){var r=n(t);return b(t)?r:rn(r,e(t))}function it(t){return t==null?t===i?ja:Va:vn&&vn in W(t)?oh(t):Ch(t)}function Vr(t,n){return t>n}function Sc(t,n){return t!=null&&F.call(t,n)}function Oc(t,n){return t!=null&&n in W(t)}function Rc(t,n,e){return t>=et(n,e)&&t<Q(n,e)}function kr(t,n,e){for(var r=e?Dr:Se,u=t[0].length,o=t.length,f=o,c=d(o),l=1/0,v=[];f--;){var _=t[f];f&&n&&(_=K(_,lt(n))),l=et(_.length,l),c[f]=!e&&(n||u>=120&&_.length>=120)?new mn(f&&_):i}_=t[0];var m=-1,C=c[0];t:for(;++m<u&&v.length<l;){var I=_[m],y=n?n(I):I;if(I=e||I!==0?I:0,!(C?ee(C,y):r(v,y,e))){for(f=o;--f;){var L=c[f];if(!(L?ee(L,y):r(t[f],y,e)))continue t}C&&C.push(y),v.push(I)}}return v}function bc(t,n,e,r){return $t(t,function(u,o,f){n(r,e(u),o,f)}),r}function ce(t,n,e){n=fn(n,t),t=$u(t,n);var r=t==null?t:t[Ut(xt(n))];return r==null?i:ht(r,t,e)}function Qs(t){return J(t)&&it(t)==bn}function Tc(t){return J(t)&&it(t)==ne}function Lc(t){return J(t)&&it(t)==Qn}function he(t,n,e,r,u){return t===n?!0:t==null||n==null||!J(t)&&!J(n)?t!==t&&n!==n:Nc(t,n,e,r,he,u)}function Nc(t,n,e,r,u,o){var f=b(t),c=b(n),l=f?Pe:rt(t),v=c?Pe:rt(n);l=l==bn?Bt:l,v=v==bn?Bt:v;var _=l==Bt,m=v==Bt,C=l==v;if(C&&hn(t)){if(!hn(n))return!1;f=!0,_=!1}if(C&&!_)return o||(o=new Rt),f||Kn(t)?Ru(t,n,e,r,u,o):uh(t,n,l,e,r,u,o);if(!(e&Sn)){var I=_&&F.call(t,"__wrapped__"),y=m&&F.call(n,"__wrapped__");if(I||y){var L=I?t.value():t,S=y?n.value():n;return o||(o=new Rt),u(L,S,e,r,o)}}return C?(o||(o=new Rt),ah(t,n,e,r,u,o)):!1}function Dc(t){return J(t)&&rt(t)==yt}function jr(t,n,e,r){var u=e.length,o=u,f=!r;if(t==null)return!o;for(t=W(t);u--;){var c=e[u];if(f&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++u<o;){c=e[u];var l=c[0],v=t[l],_=c[1];if(f&&c[2]){if(v===i&&!(l in t))return!1}else{var m=new Rt;if(r)var C=r(v,_,l,t,n,m);if(!(C===i?he(_,v,Sn|me,r,m):C))return!1}}return!0}function Vs(t){if(!z(t)||vh(t))return!1;var n=Xt(t)?Df:Io;return n.test(An(t))}function Hc(t){return J(t)&&it(t)==kn}function $c(t){return J(t)&&rt(t)==St}function qc(t){return J(t)&&fr(t.length)&&!!G[it(t)]}function ks(t){return typeof t=="function"?t:t==null?ct:typeof t=="object"?b(t)?nu(t[0],t[1]):tu(t):Pa(t)}function ti(t){if(!de(t))return Wf(t);var n=[];for(var e in W(t))F.call(t,e)&&e!="constructor"&&n.push(e);return n}function Uc(t){if(!z(t))return Ph(t);var n=de(t),e=[];for(var r in t)r=="constructor"&&(n||!F.call(t,r))||e.push(r);return e}function ni(t,n){return t<n}function js(t,n){var e=-1,r=ot(t)?d(t.length):[];return an(t,function(u,o,f){r[++e]=n(u,o,f)}),r}function tu(t){var n=vi(t);return n.length==1&&n[0][2]?Du(n[0][0],n[0][1]):function(e){return e===t||jr(e,t,n)}}function nu(t,n){return mi(t)&&Nu(n)?Du(Ut(t),n):function(e){var r=Oi(e,t);return r===i&&r===n?Ri(e,t):he(n,r,Sn|me)}}function Ye(t,n,e,r,u){t!==n&&Xr(n,function(o,f){if(u||(u=new Rt),z(o))Fc(t,n,f,e,Ye,r,u);else{var c=r?r(Pi(t,f),o,f+"",t,n,u):i;c===i&&(c=o),Yr(t,f,c)}},ft)}function Fc(t,n,e,r,u,o,f){var c=Pi(t,e),l=Pi(n,e),v=f.get(l);if(v){Yr(t,e,v);return}var _=o?o(c,l,e+"",t,n,f):i,m=_===i;if(m){var C=b(l),I=!C&&hn(l),y=!C&&!I&&Kn(l);_=l,C||I||y?b(c)?_=c:Y(c)?_=at(c):I?(m=!1,_=pu(l,!0)):y?(m=!1,_=du(l,!0)):_=[]:ve(l)||In(l)?(_=c,In(c)?_=ca(c):(!z(c)||Xt(c))&&(_=Lu(l))):m=!1}m&&(f.set(l,_),u(_,l,r,o,f),f.delete(l)),Yr(t,e,_)}function eu(t,n){var e=t.length;if(e)return n+=n<0?e:0,Zt(n,e)?t[n]:i}function ru(t,n,e){n.length?n=K(n,function(o){return b(o)?function(f){return Pn(f,o.length===1?o[0]:o)}:o}):n=[ct];var r=-1;n=K(n,lt(E()));var u=js(t,function(o,f,c){var l=K(n,function(v){return v(o)});return{criteria:l,index:++r,value:o}});return lf(u,function(o,f){return kc(o,f,e)})}function Wc(t,n){return iu(t,n,function(e,r){return Ri(t,r)})}function iu(t,n,e){for(var r=-1,u=n.length,o={};++r<u;){var f=n[r],c=Pn(t,f);e(c,f)&&le(o,fn(f,t),c)}return o}function Mc(t){return function(n){return Pn(n,t)}}function ei(t,n,e,r){var u=r?hf:Nn,o=-1,f=n.length,c=t;for(t===n&&(n=at(n)),e&&(c=K(t,lt(e)));++o<f;)for(var l=0,v=n[o],_=e?e(v):v;(l=u(c,_,l,r))>-1;)c!==t&&qe.call(c,l,1),qe.call(t,l,1);return t}function su(t,n){for(var e=t?n.length:0,r=e-1;e--;){var u=n[e];if(e==r||u!==o){var o=u;Zt(u)?qe.call(t,u,1):ui(t,u)}}return t}function ri(t,n){return t+We(Fs()*(n-t+1))}function Bc(t,n,e,r){for(var u=-1,o=Q(Fe((n-t)/(e||1)),0),f=d(o);o--;)f[r?o:++u]=t,t+=e;return f}function ii(t,n){var e="";if(!t||n<1||n>nn)return e;do n%2&&(e+=t),n=We(n/2),n&&(t+=t);while(n);return e}function N(t,n){return Ci(Hu(t,n,ct),t+"")}function Gc(t){return Bs(zn(t))}function Kc(t,n){var e=zn(t);return rr(e,wn(n,0,e.length))}function le(t,n,e,r){if(!z(t))return t;n=fn(n,t);for(var u=-1,o=n.length,f=o-1,c=t;c!=null&&++u<o;){var l=Ut(n[u]),v=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(u!=f){var _=c[l];v=r?r(_,l,c):i,v===i&&(v=z(_)?_:Zt(n[u+1])?[]:{})}oe(c,l,v),c=c[l]}return t}var uu=Me?function(t,n){return Me.set(t,n),t}:ct,zc=Ue?function(t,n){return Ue(t,"toString",{configurable:!0,enumerable:!1,value:Ti(n),writable:!0})}:ct;function Jc(t){return rr(zn(t))}function It(t,n,e){var r=-1,u=t.length;n<0&&(n=-n>u?0:u+n),e=e>u?u:e,e<0&&(e+=u),u=n>e?0:e-n>>>0,n>>>=0;for(var o=d(u);++r<u;)o[r]=t[r+n];return o}function Yc(t,n){var e;return an(t,function(r,u,o){return e=n(r,u,o),!e}),!!e}function Ze(t,n,e){var r=0,u=t==null?r:t.length;if(typeof n=="number"&&n===n&&u<=Ya){for(;r<u;){var o=r+u>>>1,f=t[o];f!==null&&!dt(f)&&(e?f<=n:f<n)?r=o+1:u=o}return u}return si(t,n,ct,e)}function si(t,n,e,r){var u=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var f=n!==n,c=n===null,l=dt(n),v=n===i;u<o;){var _=We((u+o)/2),m=e(t[_]),C=m!==i,I=m===null,y=m===m,L=dt(m);if(f)var S=r||y;else v?S=y&&(r||C):c?S=y&&C&&(r||!I):l?S=y&&C&&!I&&(r||!L):I||L?S=!1:S=r?m<=n:m<n;S?u=_+1:o=_}return et(o,Ja)}function au(t,n){for(var e=-1,r=t.length,u=0,o=[];++e<r;){var f=t[e],c=n?n(f):f;if(!e||!bt(c,l)){var l=c;o[u++]=f===0?0:f}}return o}function ou(t){return typeof t=="number"?t:dt(t)?we:+t}function pt(t){if(typeof t=="string")return t;if(b(t))return K(t,pt)+"";if(dt(t))return Ws?Ws.call(t):"";var n=t+"";return n=="0"&&1/t==-dn?"-0":n}function on(t,n,e){var r=-1,u=Se,o=t.length,f=!0,c=[],l=c;if(e)f=!1,u=Dr;else if(o>=w){var v=n?null:ih(t);if(v)return Re(v);f=!1,u=ee,l=new mn}else l=n?[]:c;t:for(;++r<o;){var _=t[r],m=n?n(_):_;if(_=e||_!==0?_:0,f&&m===m){for(var C=l.length;C--;)if(l[C]===m)continue t;n&&l.push(m),c.push(_)}else u(l,m,e)||(l!==c&&l.push(m),c.push(_))}return c}function ui(t,n){return n=fn(n,t),t=$u(t,n),t==null||delete t[Ut(xt(n))]}function fu(t,n,e,r){return le(t,n,e(Pn(t,n)),r)}function Xe(t,n,e,r){for(var u=t.length,o=r?u:-1;(r?o--:++o<u)&&n(t[o],o,t););return e?It(t,r?0:o,r?o+1:u):It(t,r?o+1:0,r?u:o)}function cu(t,n){var e=t;return e instanceof H&&(e=e.value()),Hr(n,function(r,u){return u.func.apply(u.thisArg,rn([r],u.args))},e)}function ai(t,n,e){var r=t.length;if(r<2)return r?on(t[0]):[];for(var u=-1,o=d(r);++u<r;)for(var f=t[u],c=-1;++c<r;)c!=u&&(o[u]=fe(o[u]||f,t[c],n,e));return on(tt(o,1),n,e)}function hu(t,n,e){for(var r=-1,u=t.length,o=n.length,f={};++r<u;){var c=r<o?n[r]:i;e(f,t[r],c)}return f}function oi(t){return Y(t)?t:[]}function fi(t){return typeof t=="function"?t:ct}function fn(t,n){return b(t)?t:mi(t,n)?[t]:Wu(U(t))}var Zc=N;function cn(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:It(t,n,e)}var lu=Hf||function(t){return j.clearTimeout(t)};function pu(t,n){if(n)return t.slice();var e=t.length,r=Ds?Ds(e):new t.constructor(e);return t.copy(r),r}function ci(t){var n=new t.constructor(t.byteLength);return new He(n).set(new He(t)),n}function Xc(t,n){var e=n?ci(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Qc(t){var n=new t.constructor(t.source,Qi.exec(t));return n.lastIndex=t.lastIndex,n}function Vc(t){return ae?W(ae.call(t)):{}}function du(t,n){var e=n?ci(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function gu(t,n){if(t!==n){var e=t!==i,r=t===null,u=t===t,o=dt(t),f=n!==i,c=n===null,l=n===n,v=dt(n);if(!c&&!v&&!o&&t>n||o&&f&&l&&!c&&!v||r&&f&&l||!e&&l||!u)return 1;if(!r&&!o&&!v&&t<n||v&&e&&u&&!r&&!o||c&&e&&u||!f&&u||!l)return-1}return 0}function kc(t,n,e){for(var r=-1,u=t.criteria,o=n.criteria,f=u.length,c=e.length;++r<f;){var l=gu(u[r],o[r]);if(l){if(r>=c)return l;var v=e[r];return l*(v=="desc"?-1:1)}}return t.index-n.index}function vu(t,n,e,r){for(var u=-1,o=t.length,f=e.length,c=-1,l=n.length,v=Q(o-f,0),_=d(l+v),m=!r;++c<l;)_[c]=n[c];for(;++u<f;)(m||u<o)&&(_[e[u]]=t[u]);for(;v--;)_[c++]=t[u++];return _}function _u(t,n,e,r){for(var u=-1,o=t.length,f=-1,c=e.length,l=-1,v=n.length,_=Q(o-c,0),m=d(_+v),C=!r;++u<_;)m[u]=t[u];for(var I=u;++l<v;)m[I+l]=n[l];for(;++f<c;)(C||u<o)&&(m[I+e[f]]=t[u++]);return m}function at(t,n){var e=-1,r=t.length;for(n||(n=d(r));++e<r;)n[e]=t[e];return n}function qt(t,n,e,r){var u=!e;e||(e={});for(var o=-1,f=n.length;++o<f;){var c=n[o],l=r?r(e[c],t[c],c,e,t):i;l===i&&(l=t[c]),u?zt(e,c,l):oe(e,c,l)}return e}function jc(t,n){return qt(t,_i(t),n)}function th(t,n){return qt(t,bu(t),n)}function Qe(t,n){return function(e,r){var u=b(e)?sf:Ac,o=n?n():{};return u(e,t,E(r,2),o)}}function Mn(t){return N(function(n,e){var r=-1,u=e.length,o=u>1?e[u-1]:i,f=u>2?e[2]:i;for(o=t.length>3&&typeof o=="function"?(u--,o):i,f&&st(e[0],e[1],f)&&(o=u<3?i:o,u=1),n=W(n);++r<u;){var c=e[r];c&&t(n,c,r,o)}return n})}function mu(t,n){return function(e,r){if(e==null)return e;if(!ot(e))return t(e,r);for(var u=e.length,o=n?u:-1,f=W(e);(n?o--:++o<u)&&r(f[o],o,f)!==!1;);return e}}function wu(t){return function(n,e,r){for(var u=-1,o=W(n),f=r(n),c=f.length;c--;){var l=f[t?c:++u];if(e(o[l],l,o)===!1)break}return n}}function nh(t,n,e){var r=n&_t,u=pe(t);function o(){var f=this&&this!==j&&this instanceof o?u:t;return f.apply(r?e:this,arguments)}return o}function Pu(t){return function(n){n=U(n);var e=Dn(n)?Ot(n):i,r=e?e[0]:n.charAt(0),u=e?cn(e,1).join(""):n.slice(1);return r[t]()+u}}function Bn(t){return function(n){return Hr(ma(_a(n).replace(Ko,"")),t,"")}}function pe(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=Wn(t.prototype),r=t.apply(e,n);return z(r)?r:e}}function eh(t,n,e){var r=pe(t);function u(){for(var o=arguments.length,f=d(o),c=o,l=Gn(u);c--;)f[c]=arguments[c];var v=o<3&&f[0]!==l&&f[o-1]!==l?[]:sn(f,l);if(o-=v.length,o<e)return Eu(t,n,Ve,u.placeholder,i,f,v,i,i,e-o);var _=this&&this!==j&&this instanceof u?r:t;return ht(_,this,f)}return u}function Cu(t){return function(n,e,r){var u=W(n);if(!ot(n)){var o=E(e,3);n=V(n),e=function(c){return o(u[c],c,u)}}var f=t(n,e,r);return f>-1?u[o?n[f]:f]:i}}function Au(t){return Yt(function(n){var e=n.length,r=e,u=Ct.prototype.thru;for(t&&n.reverse();r--;){var o=n[r];if(typeof o!="function")throw new Pt(R);if(u&&!f&&nr(o)=="wrapper")var f=new Ct([],!0)}for(r=f?r:e;++r<e;){o=n[r];var c=nr(o),l=c=="wrapper"?gi(o):i;l&&wi(l[0])&&l[1]==(Mt|Nt|Dt|Zn)&&!l[4].length&&l[9]==1?f=f[nr(l[0])].apply(f,l[3]):f=o.length==1&&wi(o)?f[c]():f.thru(o)}return function(){var v=arguments,_=v[0];if(f&&v.length==1&&b(_))return f.plant(_).value();for(var m=0,C=e?n[m].apply(this,v):_;++m<e;)C=n[m].call(this,C);return C}})}function Ve(t,n,e,r,u,o,f,c,l,v){var _=n&Mt,m=n&_t,C=n&pn,I=n&(Nt|On),y=n&gr,L=C?i:pe(t);function S(){for(var D=arguments.length,$=d(D),gt=D;gt--;)$[gt]=arguments[gt];if(I)var ut=Gn(S),vt=df($,ut);if(r&&($=vu($,r,u,I)),o&&($=_u($,o,f,I)),D-=vt,I&&D<v){var Z=sn($,ut);return Eu(t,n,Ve,S.placeholder,e,$,Z,c,l,v-D)}var Tt=m?e:this,Vt=C?Tt[t]:t;return D=$.length,c?$=Ah($,c):y&&D>1&&$.reverse(),_&&l<D&&($.length=l),this&&this!==j&&this instanceof S&&(Vt=L||pe(Vt)),Vt.apply(Tt,$)}return S}function Iu(t,n){return function(e,r){return bc(e,t,n(r),{})}}function ke(t,n){return function(e,r){var u;if(e===i&&r===i)return n;if(e!==i&&(u=e),r!==i){if(u===i)return r;typeof e=="string"||typeof r=="string"?(e=pt(e),r=pt(r)):(e=ou(e),r=ou(r)),u=t(e,r)}return u}}function hi(t){return Yt(function(n){return n=K(n,lt(E())),N(function(e){var r=this;return t(n,function(u){return ht(u,r,e)})})})}function je(t,n){n=n===i?" ":pt(n);var e=n.length;if(e<2)return e?ii(n,t):n;var r=ii(n,Fe(t/Hn(n)));return Dn(n)?cn(Ot(r),0,t).join(""):r.slice(0,t)}function rh(t,n,e,r){var u=n&_t,o=pe(t);function f(){for(var c=-1,l=arguments.length,v=-1,_=r.length,m=d(_+l),C=this&&this!==j&&this instanceof f?o:t;++v<_;)m[v]=r[v];for(;l--;)m[v++]=arguments[++c];return ht(C,u?e:this,m)}return f}function xu(t){return function(n,e,r){return r&&typeof r!="number"&&st(n,e,r)&&(e=r=i),n=Qt(n),e===i?(e=n,n=0):e=Qt(e),r=r===i?n<e?1:-1:Qt(r),Bc(n,e,r,t)}}function tr(t){return function(n,e){return typeof n=="string"&&typeof e=="string"||(n=Et(n),e=Et(e)),t(n,e)}}function Eu(t,n,e,r,u,o,f,c,l,v){var _=n&Nt,m=_?f:i,C=_?i:f,I=_?o:i,y=_?i:o;n|=_?Dt:Rn,n&=~(_?Rn:Dt),n&Gi||(n&=~(_t|pn));var L=[t,n,u,I,m,y,C,c,l,v],S=e.apply(i,L);return wi(t)&&qu(S,L),S.placeholder=r,Uu(S,t,n)}function li(t){var n=X[t];return function(e,r){if(e=Et(e),r=r==null?0:et(T(r),292),r&&Us(e)){var u=(U(e)+"e").split("e"),o=n(u[0]+"e"+(+u[1]+r));return u=(U(o)+"e").split("e"),+(u[0]+"e"+(+u[1]-r))}return n(e)}}var ih=Un&&1/Re(new Un([,-0]))[1]==dn?function(t){return new Un(t)}:Di;function yu(t){return function(n){var e=rt(n);return e==yt?Br(n):e==St?Cf(n):pf(n,t(n))}}function Jt(t,n,e,r,u,o,f,c){var l=n&pn;if(!l&&typeof t!="function")throw new Pt(R);var v=r?r.length:0;if(v||(n&=~(Dt|Rn),r=u=i),f=f===i?f:Q(T(f),0),c=c===i?c:T(c),v-=u?u.length:0,n&Rn){var _=r,m=u;r=u=i}var C=l?i:gi(t),I=[t,n,e,r,u,_,m,o,f,c];if(C&&wh(I,C),t=I[0],n=I[1],e=I[2],r=I[3],u=I[4],c=I[9]=I[9]===i?l?0:t.length:Q(I[9]-v,0),!c&&n&(Nt|On)&&(n&=~(Nt|On)),!n||n==_t)var y=nh(t,n,e);else n==Nt||n==On?y=eh(t,n,c):(n==Dt||n==(_t|Dt))&&!u.length?y=rh(t,n,e,r):y=Ve.apply(i,I);var L=C?uu:qu;return Uu(L(y,I),t,n)}function Su(t,n,e,r){return t===i||bt(t,qn[e])&&!F.call(r,e)?n:t}function Ou(t,n,e,r,u,o){return z(t)&&z(n)&&(o.set(n,t),Ye(t,n,i,Ou,o),o.delete(n)),t}function sh(t){return ve(t)?i:t}function Ru(t,n,e,r,u,o){var f=e&Sn,c=t.length,l=n.length;if(c!=l&&!(f&&l>c))return!1;var v=o.get(t),_=o.get(n);if(v&&_)return v==n&&_==t;var m=-1,C=!0,I=e&me?new mn:i;for(o.set(t,n),o.set(n,t);++m<c;){var y=t[m],L=n[m];if(r)var S=f?r(L,y,m,n,t,o):r(y,L,m,t,n,o);if(S!==i){if(S)continue;C=!1;break}if(I){if(!$r(n,function(D,$){if(!ee(I,$)&&(y===D||u(y,D,e,r,o)))return I.push($)})){C=!1;break}}else if(!(y===L||u(y,L,e,r,o))){C=!1;break}}return o.delete(t),o.delete(n),C}function uh(t,n,e,r,u,o,f){switch(e){case Tn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ne:return!(t.byteLength!=n.byteLength||!o(new He(t),new He(n)));case Xn:case Qn:case Vn:return bt(+t,+n);case Ce:return t.name==n.name&&t.message==n.message;case kn:case jn:return t==n+"";case yt:var c=Br;case St:var l=r&Sn;if(c||(c=Re),t.size!=n.size&&!l)return!1;var v=f.get(t);if(v)return v==n;r|=me,f.set(t,n);var _=Ru(c(t),c(n),r,u,o,f);return f.delete(t),_;case Ie:if(ae)return ae.call(t)==ae.call(n)}return!1}function ah(t,n,e,r,u,o){var f=e&Sn,c=pi(t),l=c.length,v=pi(n),_=v.length;if(l!=_&&!f)return!1;for(var m=l;m--;){var C=c[m];if(!(f?C in n:F.call(n,C)))return!1}var I=o.get(t),y=o.get(n);if(I&&y)return I==n&&y==t;var L=!0;o.set(t,n),o.set(n,t);for(var S=f;++m<l;){C=c[m];var D=t[C],$=n[C];if(r)var gt=f?r($,D,C,n,t,o):r(D,$,C,t,n,o);if(!(gt===i?D===$||u(D,$,e,r,o):gt)){L=!1;break}S||(S=C=="constructor")}if(L&&!S){var ut=t.constructor,vt=n.constructor;ut!=vt&&"constructor"in t&&"constructor"in n&&!(typeof ut=="function"&&ut instanceof ut&&typeof vt=="function"&&vt instanceof vt)&&(L=!1)}return o.delete(t),o.delete(n),L}function Yt(t){return Ci(Hu(t,i,Ku),t+"")}function pi(t){return Xs(t,V,_i)}function di(t){return Xs(t,ft,bu)}var gi=Me?function(t){return Me.get(t)}:Di;function nr(t){for(var n=t.name+"",e=Fn[n],r=F.call(Fn,n)?e.length:0;r--;){var u=e[r],o=u.func;if(o==null||o==t)return u.name}return n}function Gn(t){var n=F.call(a,"placeholder")?a:t;return n.placeholder}function E(){var t=a.iteratee||Li;return t=t===Li?ks:t,arguments.length?t(arguments[0],arguments[1]):t}function er(t,n){var e=t.__data__;return gh(n)?e[typeof n=="string"?"string":"hash"]:e.map}function vi(t){for(var n=V(t),e=n.length;e--;){var r=n[e],u=t[r];n[e]=[r,u,Nu(u)]}return n}function Cn(t,n){var e=mf(t,n);return Vs(e)?e:i}function oh(t){var n=F.call(t,vn),e=t[vn];try{t[vn]=i;var r=!0}catch{}var u=Ne.call(t);return r&&(n?t[vn]=e:delete t[vn]),u}var _i=Kr?function(t){return t==null?[]:(t=W(t),en(Kr(t),function(n){return $s.call(t,n)}))}:Hi,bu=Kr?function(t){for(var n=[];t;)rn(n,_i(t)),t=$e(t);return n}:Hi,rt=it;(zr&&rt(new zr(new ArrayBuffer(1)))!=Tn||ie&&rt(new ie)!=yt||Jr&&rt(Jr.resolve())!=Ji||Un&&rt(new Un)!=St||se&&rt(new se)!=te)&&(rt=function(t){var n=it(t),e=n==Bt?t.constructor:i,r=e?An(e):"";if(r)switch(r){case Kf:return Tn;case zf:return yt;case Jf:return Ji;case Yf:return St;case Zf:return te}return n});function fh(t,n,e){for(var r=-1,u=e.length;++r<u;){var o=e[r],f=o.size;switch(o.type){case"drop":t+=f;break;case"dropRight":n-=f;break;case"take":n=et(n,t+f);break;case"takeRight":t=Q(t,n-f);break}}return{start:t,end:n}}function ch(t){var n=t.match(go);return n?n[1].split(vo):[]}function Tu(t,n,e){n=fn(n,t);for(var r=-1,u=n.length,o=!1;++r<u;){var f=Ut(n[r]);if(!(o=t!=null&&e(t,f)))break;t=t[f]}return o||++r!=u?o:(u=t==null?0:t.length,!!u&&fr(u)&&Zt(f,u)&&(b(t)||In(t)))}function hh(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&F.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Lu(t){return typeof t.constructor=="function"&&!de(t)?Wn($e(t)):{}}function lh(t,n,e){var r=t.constructor;switch(n){case ne:return ci(t);case Xn:case Qn:return new r(+t);case Tn:return Xc(t,e);case vr:case _r:case mr:case wr:case Pr:case Cr:case Ar:case Ir:case xr:return du(t,e);case yt:return new r;case Vn:case jn:return new r(t);case kn:return Qc(t);case St:return new r;case Ie:return Vc(t)}}function ph(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(po,`{
/* [wrapped with `+n+`] */
`)}function dh(t){return b(t)||In(t)||!!(qs&&t&&t[qs])}function Zt(t,n){var e=typeof t;return n=n??nn,!!n&&(e=="number"||e!="symbol"&&Eo.test(t))&&t>-1&&t%1==0&&t<n}function st(t,n,e){if(!z(e))return!1;var r=typeof n;return(r=="number"?ot(e)&&Zt(n,e.length):r=="string"&&n in e)?bt(e[n],t):!1}function mi(t,n){if(b(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||dt(t)?!0:fo.test(t)||!oo.test(t)||n!=null&&t in W(n)}function gh(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function wi(t){var n=nr(t),e=a[n];if(typeof e!="function"||!(n in H.prototype))return!1;if(t===e)return!0;var r=gi(e);return!!r&&t===r[0]}function vh(t){return!!Ns&&Ns in t}var _h=Te?Xt:$i;function de(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||qn;return t===e}function Nu(t){return t===t&&!z(t)}function Du(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==i||t in W(e))}}function mh(t){var n=ar(t,function(r){return e.size===Yn&&e.clear(),r}),e=n.cache;return n}function wh(t,n){var e=t[1],r=n[1],u=e|r,o=u<(_t|pn|Mt),f=r==Mt&&e==Nt||r==Mt&&e==Zn&&t[7].length<=n[8]||r==(Mt|Zn)&&n[7].length<=n[8]&&e==Nt;if(!(o||f))return t;r&_t&&(t[2]=n[2],u|=e&_t?0:Gi);var c=n[3];if(c){var l=t[3];t[3]=l?vu(l,c,n[4]):c,t[4]=l?sn(t[3],En):n[4]}return c=n[5],c&&(l=t[5],t[5]=l?_u(l,c,n[6]):c,t[6]=l?sn(t[5],En):n[6]),c=n[7],c&&(t[7]=c),r&Mt&&(t[8]=t[8]==null?n[8]:et(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=u,t}function Ph(t){var n=[];if(t!=null)for(var e in W(t))n.push(e);return n}function Ch(t){return Ne.call(t)}function Hu(t,n,e){return n=Q(n===i?t.length-1:n,0),function(){for(var r=arguments,u=-1,o=Q(r.length-n,0),f=d(o);++u<o;)f[u]=r[n+u];u=-1;for(var c=d(n+1);++u<n;)c[u]=r[u];return c[n]=e(f),ht(t,this,c)}}function $u(t,n){return n.length<2?t:Pn(t,It(n,0,-1))}function Ah(t,n){for(var e=t.length,r=et(n.length,e),u=at(t);r--;){var o=n[r];t[r]=Zt(o,e)?u[o]:i}return t}function Pi(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var qu=Fu(uu),ge=qf||function(t,n){return j.setTimeout(t,n)},Ci=Fu(zc);function Uu(t,n,e){var r=n+"";return Ci(t,ph(r,Ih(ch(r),e)))}function Fu(t){var n=0,e=0;return function(){var r=Mf(),u=Ba-(r-e);if(e=r,u>0){if(++n>=Ma)return arguments[0]}else n=0;return t.apply(i,arguments)}}function rr(t,n){var e=-1,r=t.length,u=r-1;for(n=n===i?r:n;++e<n;){var o=ri(e,u),f=t[o];t[o]=t[e],t[e]=f}return t.length=n,t}var Wu=mh(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(co,function(e,r,u,o){n.push(u?o.replace(wo,"$1"):r||e)}),n});function Ut(t){if(typeof t=="string"||dt(t))return t;var n=t+"";return n=="0"&&1/t==-dn?"-0":n}function An(t){if(t!=null){try{return Le.call(t)}catch{}try{return t+""}catch{}}return""}function Ih(t,n){return wt(Za,function(e){var r="_."+e[0];n&e[1]&&!Se(t,r)&&t.push(r)}),t.sort()}function Mu(t){if(t instanceof H)return t.clone();var n=new Ct(t.__wrapped__,t.__chain__);return n.__actions__=at(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function xh(t,n,e){(e?st(t,n,e):n===i)?n=1:n=Q(T(n),0);var r=t==null?0:t.length;if(!r||n<1)return[];for(var u=0,o=0,f=d(Fe(r/n));u<r;)f[o++]=It(t,u,u+=n);return f}function Eh(t){for(var n=-1,e=t==null?0:t.length,r=0,u=[];++n<e;){var o=t[n];o&&(u[r++]=o)}return u}function yh(){var t=arguments.length;if(!t)return[];for(var n=d(t-1),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return rn(b(e)?at(e):[e],tt(n,1))}var Sh=N(function(t,n){return Y(t)?fe(t,tt(n,1,Y,!0)):[]}),Oh=N(function(t,n){var e=xt(n);return Y(e)&&(e=i),Y(t)?fe(t,tt(n,1,Y,!0),E(e,2)):[]}),Rh=N(function(t,n){var e=xt(n);return Y(e)&&(e=i),Y(t)?fe(t,tt(n,1,Y,!0),i,e):[]});function bh(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:T(n),It(t,n<0?0:n,r)):[]}function Th(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:T(n),n=r-n,It(t,0,n<0?0:n)):[]}function Lh(t,n){return t&&t.length?Xe(t,E(n,3),!0,!0):[]}function Nh(t,n){return t&&t.length?Xe(t,E(n,3),!0):[]}function Dh(t,n,e,r){var u=t==null?0:t.length;return u?(e&&typeof e!="number"&&st(t,n,e)&&(e=0,r=u),yc(t,n,e,r)):[]}function Bu(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=e==null?0:T(e);return u<0&&(u=Q(r+u,0)),Oe(t,E(n,3),u)}function Gu(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=r-1;return e!==i&&(u=T(e),u=e<0?Q(r+u,0):et(u,r-1)),Oe(t,E(n,3),u,!0)}function Ku(t){var n=t==null?0:t.length;return n?tt(t,1):[]}function Hh(t){var n=t==null?0:t.length;return n?tt(t,dn):[]}function $h(t,n){var e=t==null?0:t.length;return e?(n=n===i?1:T(n),tt(t,n)):[]}function qh(t){for(var n=-1,e=t==null?0:t.length,r={};++n<e;){var u=t[n];r[u[0]]=u[1]}return r}function zu(t){return t&&t.length?t[0]:i}function Uh(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=e==null?0:T(e);return u<0&&(u=Q(r+u,0)),Nn(t,n,u)}function Fh(t){var n=t==null?0:t.length;return n?It(t,0,-1):[]}var Wh=N(function(t){var n=K(t,oi);return n.length&&n[0]===t[0]?kr(n):[]}),Mh=N(function(t){var n=xt(t),e=K(t,oi);return n===xt(e)?n=i:e.pop(),e.length&&e[0]===t[0]?kr(e,E(n,2)):[]}),Bh=N(function(t){var n=xt(t),e=K(t,oi);return n=typeof n=="function"?n:i,n&&e.pop(),e.length&&e[0]===t[0]?kr(e,i,n):[]});function Gh(t,n){return t==null?"":Ff.call(t,n)}function xt(t){var n=t==null?0:t.length;return n?t[n-1]:i}function Kh(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=r;return e!==i&&(u=T(e),u=u<0?Q(r+u,0):et(u,r-1)),n===n?If(t,n,u):Oe(t,Es,u,!0)}function zh(t,n){return t&&t.length?eu(t,T(n)):i}var Jh=N(Ju);function Ju(t,n){return t&&t.length&&n&&n.length?ei(t,n):t}function Yh(t,n,e){return t&&t.length&&n&&n.length?ei(t,n,E(e,2)):t}function Zh(t,n,e){return t&&t.length&&n&&n.length?ei(t,n,i,e):t}var Xh=Yt(function(t,n){var e=t==null?0:t.length,r=Zr(t,n);return su(t,K(n,function(u){return Zt(u,e)?+u:u}).sort(gu)),r});function Qh(t,n){var e=[];if(!(t&&t.length))return e;var r=-1,u=[],o=t.length;for(n=E(n,3);++r<o;){var f=t[r];n(f,r,t)&&(e.push(f),u.push(r))}return su(t,u),e}function Ai(t){return t==null?t:Gf.call(t)}function Vh(t,n,e){var r=t==null?0:t.length;return r?(e&&typeof e!="number"&&st(t,n,e)?(n=0,e=r):(n=n==null?0:T(n),e=e===i?r:T(e)),It(t,n,e)):[]}function kh(t,n){return Ze(t,n)}function jh(t,n,e){return si(t,n,E(e,2))}function tl(t,n){var e=t==null?0:t.length;if(e){var r=Ze(t,n);if(r<e&&bt(t[r],n))return r}return-1}function nl(t,n){return Ze(t,n,!0)}function el(t,n,e){return si(t,n,E(e,2),!0)}function rl(t,n){var e=t==null?0:t.length;if(e){var r=Ze(t,n,!0)-1;if(bt(t[r],n))return r}return-1}function il(t){return t&&t.length?au(t):[]}function sl(t,n){return t&&t.length?au(t,E(n,2)):[]}function ul(t){var n=t==null?0:t.length;return n?It(t,1,n):[]}function al(t,n,e){return t&&t.length?(n=e||n===i?1:T(n),It(t,0,n<0?0:n)):[]}function ol(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:T(n),n=r-n,It(t,n<0?0:n,r)):[]}function fl(t,n){return t&&t.length?Xe(t,E(n,3),!1,!0):[]}function cl(t,n){return t&&t.length?Xe(t,E(n,3)):[]}var hl=N(function(t){return on(tt(t,1,Y,!0))}),ll=N(function(t){var n=xt(t);return Y(n)&&(n=i),on(tt(t,1,Y,!0),E(n,2))}),pl=N(function(t){var n=xt(t);return n=typeof n=="function"?n:i,on(tt(t,1,Y,!0),i,n)});function dl(t){return t&&t.length?on(t):[]}function gl(t,n){return t&&t.length?on(t,E(n,2)):[]}function vl(t,n){return n=typeof n=="function"?n:i,t&&t.length?on(t,i,n):[]}function Ii(t){if(!(t&&t.length))return[];var n=0;return t=en(t,function(e){if(Y(e))return n=Q(e.length,n),!0}),Wr(n,function(e){return K(t,qr(e))})}function Yu(t,n){if(!(t&&t.length))return[];var e=Ii(t);return n==null?e:K(e,function(r){return ht(n,i,r)})}var _l=N(function(t,n){return Y(t)?fe(t,n):[]}),ml=N(function(t){return ai(en(t,Y))}),wl=N(function(t){var n=xt(t);return Y(n)&&(n=i),ai(en(t,Y),E(n,2))}),Pl=N(function(t){var n=xt(t);return n=typeof n=="function"?n:i,ai(en(t,Y),i,n)}),Cl=N(Ii);function Al(t,n){return hu(t||[],n||[],oe)}function Il(t,n){return hu(t||[],n||[],le)}var xl=N(function(t){var n=t.length,e=n>1?t[n-1]:i;return e=typeof e=="function"?(t.pop(),e):i,Yu(t,e)});function Zu(t){var n=a(t);return n.__chain__=!0,n}function El(t,n){return n(t),t}function ir(t,n){return n(t)}var yl=Yt(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,u=function(o){return Zr(o,t)};return n>1||this.__actions__.length||!(r instanceof H)||!Zt(e)?this.thru(u):(r=r.slice(e,+e+(n?1:0)),r.__actions__.push({func:ir,args:[u],thisArg:i}),new Ct(r,this.__chain__).thru(function(o){return n&&!o.length&&o.push(i),o}))});function Sl(){return Zu(this)}function Ol(){return new Ct(this.value(),this.__chain__)}function Rl(){this.__values__===i&&(this.__values__=oa(this.value()));var t=this.__index__>=this.__values__.length,n=t?i:this.__values__[this.__index__++];return{done:t,value:n}}function bl(){return this}function Tl(t){for(var n,e=this;e instanceof Ge;){var r=Mu(e);r.__index__=0,r.__values__=i,n?u.__wrapped__=r:n=r;var u=r;e=e.__wrapped__}return u.__wrapped__=t,n}function Ll(){var t=this.__wrapped__;if(t instanceof H){var n=t;return this.__actions__.length&&(n=new H(this)),n=n.reverse(),n.__actions__.push({func:ir,args:[Ai],thisArg:i}),new Ct(n,this.__chain__)}return this.thru(Ai)}function Nl(){return cu(this.__wrapped__,this.__actions__)}var Dl=Qe(function(t,n,e){F.call(t,e)?++t[e]:zt(t,e,1)});function Hl(t,n,e){var r=b(t)?Is:Ec;return e&&st(t,n,e)&&(n=i),r(t,E(n,3))}function $l(t,n){var e=b(t)?en:Ys;return e(t,E(n,3))}var ql=Cu(Bu),Ul=Cu(Gu);function Fl(t,n){return tt(sr(t,n),1)}function Wl(t,n){return tt(sr(t,n),dn)}function Ml(t,n,e){return e=e===i?1:T(e),tt(sr(t,n),e)}function Xu(t,n){var e=b(t)?wt:an;return e(t,E(n,3))}function Qu(t,n){var e=b(t)?uf:Js;return e(t,E(n,3))}var Bl=Qe(function(t,n,e){F.call(t,e)?t[e].push(n):zt(t,e,[n])});function Gl(t,n,e,r){t=ot(t)?t:zn(t),e=e&&!r?T(e):0;var u=t.length;return e<0&&(e=Q(u+e,0)),cr(t)?e<=u&&t.indexOf(n,e)>-1:!!u&&Nn(t,n,e)>-1}var Kl=N(function(t,n,e){var r=-1,u=typeof n=="function",o=ot(t)?d(t.length):[];return an(t,function(f){o[++r]=u?ht(n,f,e):ce(f,n,e)}),o}),zl=Qe(function(t,n,e){zt(t,e,n)});function sr(t,n){var e=b(t)?K:js;return e(t,E(n,3))}function Jl(t,n,e,r){return t==null?[]:(b(n)||(n=n==null?[]:[n]),e=r?i:e,b(e)||(e=e==null?[]:[e]),ru(t,n,e))}var Yl=Qe(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});function Zl(t,n,e){var r=b(t)?Hr:Ss,u=arguments.length<3;return r(t,E(n,4),e,u,an)}function Xl(t,n,e){var r=b(t)?af:Ss,u=arguments.length<3;return r(t,E(n,4),e,u,Js)}function Ql(t,n){var e=b(t)?en:Ys;return e(t,or(E(n,3)))}function Vl(t){var n=b(t)?Bs:Gc;return n(t)}function kl(t,n,e){(e?st(t,n,e):n===i)?n=1:n=T(n);var r=b(t)?Pc:Kc;return r(t,n)}function jl(t){var n=b(t)?Cc:Jc;return n(t)}function tp(t){if(t==null)return 0;if(ot(t))return cr(t)?Hn(t):t.length;var n=rt(t);return n==yt||n==St?t.size:ti(t).length}function np(t,n,e){var r=b(t)?$r:Yc;return e&&st(t,n,e)&&(n=i),r(t,E(n,3))}var ep=N(function(t,n){if(t==null)return[];var e=n.length;return e>1&&st(t,n[0],n[1])?n=[]:e>2&&st(n[0],n[1],n[2])&&(n=[n[0]]),ru(t,tt(n,1),[])}),ur=$f||function(){return j.Date.now()};function rp(t,n){if(typeof n!="function")throw new Pt(R);return t=T(t),function(){if(--t<1)return n.apply(this,arguments)}}function Vu(t,n,e){return n=e?i:n,n=t&&n==null?t.length:n,Jt(t,Mt,i,i,i,i,n)}function ku(t,n){var e;if(typeof n!="function")throw new Pt(R);return t=T(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var xi=N(function(t,n,e){var r=_t;if(e.length){var u=sn(e,Gn(xi));r|=Dt}return Jt(t,r,n,e,u)}),ju=N(function(t,n,e){var r=_t|pn;if(e.length){var u=sn(e,Gn(ju));r|=Dt}return Jt(n,r,t,e,u)});function ta(t,n,e){n=e?i:n;var r=Jt(t,Nt,i,i,i,i,i,n);return r.placeholder=ta.placeholder,r}function na(t,n,e){n=e?i:n;var r=Jt(t,On,i,i,i,i,i,n);return r.placeholder=na.placeholder,r}function ea(t,n,e){var r,u,o,f,c,l,v=0,_=!1,m=!1,C=!0;if(typeof t!="function")throw new Pt(R);n=Et(n)||0,z(e)&&(_=!!e.leading,m="maxWait"in e,o=m?Q(Et(e.maxWait)||0,n):o,C="trailing"in e?!!e.trailing:C);function I(Z){var Tt=r,Vt=u;return r=u=i,v=Z,f=t.apply(Vt,Tt),f}function y(Z){return v=Z,c=ge(D,n),_?I(Z):f}function L(Z){var Tt=Z-l,Vt=Z-v,Ca=n-Tt;return m?et(Ca,o-Vt):Ca}function S(Z){var Tt=Z-l,Vt=Z-v;return l===i||Tt>=n||Tt<0||m&&Vt>=o}function D(){var Z=ur();if(S(Z))return $(Z);c=ge(D,L(Z))}function $(Z){return c=i,C&&r?I(Z):(r=u=i,f)}function gt(){c!==i&&lu(c),v=0,r=l=u=c=i}function ut(){return c===i?f:$(ur())}function vt(){var Z=ur(),Tt=S(Z);if(r=arguments,u=this,l=Z,Tt){if(c===i)return y(l);if(m)return lu(c),c=ge(D,n),I(l)}return c===i&&(c=ge(D,n)),f}return vt.cancel=gt,vt.flush=ut,vt}var ip=N(function(t,n){return zs(t,1,n)}),sp=N(function(t,n,e){return zs(t,Et(n)||0,e)});function up(t){return Jt(t,gr)}function ar(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Pt(R);var e=function(){var r=arguments,u=n?n.apply(this,r):r[0],o=e.cache;if(o.has(u))return o.get(u);var f=t.apply(this,r);return e.cache=o.set(u,f)||o,f};return e.cache=new(ar.Cache||Kt),e}ar.Cache=Kt;function or(t){if(typeof t!="function")throw new Pt(R);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function ap(t){return ku(2,t)}var op=Zc(function(t,n){n=n.length==1&&b(n[0])?K(n[0],lt(E())):K(tt(n,1),lt(E()));var e=n.length;return N(function(r){for(var u=-1,o=et(r.length,e);++u<o;)r[u]=n[u].call(this,r[u]);return ht(t,this,r)})}),Ei=N(function(t,n){var e=sn(n,Gn(Ei));return Jt(t,Dt,i,n,e)}),ra=N(function(t,n){var e=sn(n,Gn(ra));return Jt(t,Rn,i,n,e)}),fp=Yt(function(t,n){return Jt(t,Zn,i,i,i,n)});function cp(t,n){if(typeof t!="function")throw new Pt(R);return n=n===i?n:T(n),N(t,n)}function hp(t,n){if(typeof t!="function")throw new Pt(R);return n=n==null?0:Q(T(n),0),N(function(e){var r=e[n],u=cn(e,0,n);return r&&rn(u,r),ht(t,this,u)})}function lp(t,n,e){var r=!0,u=!0;if(typeof t!="function")throw new Pt(R);return z(e)&&(r="leading"in e?!!e.leading:r,u="trailing"in e?!!e.trailing:u),ea(t,n,{leading:r,maxWait:n,trailing:u})}function pp(t){return Vu(t,1)}function dp(t,n){return Ei(fi(n),t)}function gp(){if(!arguments.length)return[];var t=arguments[0];return b(t)?t:[t]}function vp(t){return At(t,yn)}function _p(t,n){return n=typeof n=="function"?n:i,At(t,yn,n)}function mp(t){return At(t,Lt|yn)}function wp(t,n){return n=typeof n=="function"?n:i,At(t,Lt|yn,n)}function Pp(t,n){return n==null||Ks(t,n,V(n))}function bt(t,n){return t===n||t!==t&&n!==n}var Cp=tr(Vr),Ap=tr(function(t,n){return t>=n}),In=Qs(function(){return arguments}())?Qs:function(t){return J(t)&&F.call(t,"callee")&&!$s.call(t,"callee")},b=d.isArray,Ip=_s?lt(_s):Tc;function ot(t){return t!=null&&fr(t.length)&&!Xt(t)}function Y(t){return J(t)&&ot(t)}function xp(t){return t===!0||t===!1||J(t)&&it(t)==Xn}var hn=Uf||$i,Ep=ms?lt(ms):Lc;function yp(t){return J(t)&&t.nodeType===1&&!ve(t)}function Sp(t){if(t==null)return!0;if(ot(t)&&(b(t)||typeof t=="string"||typeof t.splice=="function"||hn(t)||Kn(t)||In(t)))return!t.length;var n=rt(t);if(n==yt||n==St)return!t.size;if(de(t))return!ti(t).length;for(var e in t)if(F.call(t,e))return!1;return!0}function Op(t,n){return he(t,n)}function Rp(t,n,e){e=typeof e=="function"?e:i;var r=e?e(t,n):i;return r===i?he(t,n,i,e):!!r}function yi(t){if(!J(t))return!1;var n=it(t);return n==Ce||n==Qa||typeof t.message=="string"&&typeof t.name=="string"&&!ve(t)}function bp(t){return typeof t=="number"&&Us(t)}function Xt(t){if(!z(t))return!1;var n=it(t);return n==Ae||n==zi||n==Xa||n==ka}function ia(t){return typeof t=="number"&&t==T(t)}function fr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nn}function z(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function J(t){return t!=null&&typeof t=="object"}var sa=ws?lt(ws):Dc;function Tp(t,n){return t===n||jr(t,n,vi(n))}function Lp(t,n,e){return e=typeof e=="function"?e:i,jr(t,n,vi(n),e)}function Np(t){return ua(t)&&t!=+t}function Dp(t){if(_h(t))throw new O(x);return Vs(t)}function Hp(t){return t===null}function $p(t){return t==null}function ua(t){return typeof t=="number"||J(t)&&it(t)==Vn}function ve(t){if(!J(t)||it(t)!=Bt)return!1;var n=$e(t);if(n===null)return!0;var e=F.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Le.call(e)==Lf}var Si=Ps?lt(Ps):Hc;function qp(t){return ia(t)&&t>=-nn&&t<=nn}var aa=Cs?lt(Cs):$c;function cr(t){return typeof t=="string"||!b(t)&&J(t)&&it(t)==jn}function dt(t){return typeof t=="symbol"||J(t)&&it(t)==Ie}var Kn=As?lt(As):qc;function Up(t){return t===i}function Fp(t){return J(t)&&rt(t)==te}function Wp(t){return J(t)&&it(t)==to}var Mp=tr(ni),Bp=tr(function(t,n){return t<=n});function oa(t){if(!t)return[];if(ot(t))return cr(t)?Ot(t):at(t);if(re&&t[re])return Pf(t[re]());var n=rt(t),e=n==yt?Br:n==St?Re:zn;return e(t)}function Qt(t){if(!t)return t===0?t:0;if(t=Et(t),t===dn||t===-dn){var n=t<0?-1:1;return n*za}return t===t?t:0}function T(t){var n=Qt(t),e=n%1;return n===n?e?n-e:n:0}function fa(t){return t?wn(T(t),0,Ht):0}function Et(t){if(typeof t=="number")return t;if(dt(t))return we;if(z(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=z(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Os(t);var e=Ao.test(t);return e||xo.test(t)?ef(t.slice(2),e?2:8):Co.test(t)?we:+t}function ca(t){return qt(t,ft(t))}function Gp(t){return t?wn(T(t),-nn,nn):t===0?t:0}function U(t){return t==null?"":pt(t)}var Kp=Mn(function(t,n){if(de(n)||ot(n)){qt(n,V(n),t);return}for(var e in n)F.call(n,e)&&oe(t,e,n[e])}),ha=Mn(function(t,n){qt(n,ft(n),t)}),hr=Mn(function(t,n,e,r){qt(n,ft(n),t,r)}),zp=Mn(function(t,n,e,r){qt(n,V(n),t,r)}),Jp=Yt(Zr);function Yp(t,n){var e=Wn(t);return n==null?e:Gs(e,n)}var Zp=N(function(t,n){t=W(t);var e=-1,r=n.length,u=r>2?n[2]:i;for(u&&st(n[0],n[1],u)&&(r=1);++e<r;)for(var o=n[e],f=ft(o),c=-1,l=f.length;++c<l;){var v=f[c],_=t[v];(_===i||bt(_,qn[v])&&!F.call(t,v))&&(t[v]=o[v])}return t}),Xp=N(function(t){return t.push(i,Ou),ht(la,i,t)});function Qp(t,n){return xs(t,E(n,3),$t)}function Vp(t,n){return xs(t,E(n,3),Qr)}function kp(t,n){return t==null?t:Xr(t,E(n,3),ft)}function jp(t,n){return t==null?t:Zs(t,E(n,3),ft)}function td(t,n){return t&&$t(t,E(n,3))}function nd(t,n){return t&&Qr(t,E(n,3))}function ed(t){return t==null?[]:Je(t,V(t))}function rd(t){return t==null?[]:Je(t,ft(t))}function Oi(t,n,e){var r=t==null?i:Pn(t,n);return r===i?e:r}function id(t,n){return t!=null&&Tu(t,n,Sc)}function Ri(t,n){return t!=null&&Tu(t,n,Oc)}var sd=Iu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=Ne.call(n)),t[n]=e},Ti(ct)),ud=Iu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=Ne.call(n)),F.call(t,n)?t[n].push(e):t[n]=[e]},E),ad=N(ce);function V(t){return ot(t)?Ms(t):ti(t)}function ft(t){return ot(t)?Ms(t,!0):Uc(t)}function od(t,n){var e={};return n=E(n,3),$t(t,function(r,u,o){zt(e,n(r,u,o),r)}),e}function fd(t,n){var e={};return n=E(n,3),$t(t,function(r,u,o){zt(e,u,n(r,u,o))}),e}var cd=Mn(function(t,n,e){Ye(t,n,e)}),la=Mn(function(t,n,e,r){Ye(t,n,e,r)}),hd=Yt(function(t,n){var e={};if(t==null)return e;var r=!1;n=K(n,function(o){return o=fn(o,t),r||(r=o.length>1),o}),qt(t,di(t),e),r&&(e=At(e,Lt|Wt|yn,sh));for(var u=n.length;u--;)ui(e,n[u]);return e});function ld(t,n){return pa(t,or(E(n)))}var pd=Yt(function(t,n){return t==null?{}:Wc(t,n)});function pa(t,n){if(t==null)return{};var e=K(di(t),function(r){return[r]});return n=E(n),iu(t,e,function(r,u){return n(r,u[0])})}function dd(t,n,e){n=fn(n,t);var r=-1,u=n.length;for(u||(u=1,t=i);++r<u;){var o=t==null?i:t[Ut(n[r])];o===i&&(r=u,o=e),t=Xt(o)?o.call(t):o}return t}function gd(t,n,e){return t==null?t:le(t,n,e)}function vd(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:le(t,n,e,r)}var da=yu(V),ga=yu(ft);function _d(t,n,e){var r=b(t),u=r||hn(t)||Kn(t);if(n=E(n,4),e==null){var o=t&&t.constructor;u?e=r?new o:[]:z(t)?e=Xt(o)?Wn($e(t)):{}:e={}}return(u?wt:$t)(t,function(f,c,l){return n(e,f,c,l)}),e}function md(t,n){return t==null?!0:ui(t,n)}function wd(t,n,e){return t==null?t:fu(t,n,fi(e))}function Pd(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:fu(t,n,fi(e),r)}function zn(t){return t==null?[]:Mr(t,V(t))}function Cd(t){return t==null?[]:Mr(t,ft(t))}function Ad(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=Et(e),e=e===e?e:0),n!==i&&(n=Et(n),n=n===n?n:0),wn(Et(t),n,e)}function Id(t,n,e){return n=Qt(n),e===i?(e=n,n=0):e=Qt(e),t=Et(t),Rc(t,n,e)}function xd(t,n,e){if(e&&typeof e!="boolean"&&st(t,n,e)&&(n=e=i),e===i&&(typeof n=="boolean"?(e=n,n=i):typeof t=="boolean"&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=Qt(t),n===i?(n=t,t=0):n=Qt(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var u=Fs();return et(t+u*(n-t+nf("1e-"+((u+"").length-1))),n)}return ri(t,n)}var Ed=Bn(function(t,n,e){return n=n.toLowerCase(),t+(e?va(n):n)});function va(t){return bi(U(t).toLowerCase())}function _a(t){return t=U(t),t&&t.replace(yo,gf).replace(zo,"")}function yd(t,n,e){t=U(t),n=pt(n);var r=t.length;e=e===i?r:wn(T(e),0,r);var u=e;return e-=n.length,e>=0&&t.slice(e,u)==n}function Sd(t){return t=U(t),t&&so.test(t)?t.replace(Zi,vf):t}function Od(t){return t=U(t),t&&ho.test(t)?t.replace(Er,"\\$&"):t}var Rd=Bn(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),bd=Bn(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),Td=Pu("toLowerCase");function Ld(t,n,e){t=U(t),n=T(n);var r=n?Hn(t):0;if(!n||r>=n)return t;var u=(n-r)/2;return je(We(u),e)+t+je(Fe(u),e)}function Nd(t,n,e){t=U(t),n=T(n);var r=n?Hn(t):0;return n&&r<n?t+je(n-r,e):t}function Dd(t,n,e){t=U(t),n=T(n);var r=n?Hn(t):0;return n&&r<n?je(n-r,e)+t:t}function Hd(t,n,e){return e||n==null?n=0:n&&(n=+n),Bf(U(t).replace(yr,""),n||0)}function $d(t,n,e){return(e?st(t,n,e):n===i)?n=1:n=T(n),ii(U(t),n)}function qd(){var t=arguments,n=U(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var Ud=Bn(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});function Fd(t,n,e){return e&&typeof e!="number"&&st(t,n,e)&&(n=e=i),e=e===i?Ht:e>>>0,e?(t=U(t),t&&(typeof n=="string"||n!=null&&!Si(n))&&(n=pt(n),!n&&Dn(t))?cn(Ot(t),0,e):t.split(n,e)):[]}var Wd=Bn(function(t,n,e){return t+(e?" ":"")+bi(n)});function Md(t,n,e){return t=U(t),e=e==null?0:wn(T(e),0,t.length),n=pt(n),t.slice(e,e+n.length)==n}function Bd(t,n,e){var r=a.templateSettings;e&&st(t,n,e)&&(n=i),t=U(t),n=hr({},n,r,Su);var u=hr({},n.imports,r.imports,Su),o=V(u),f=Mr(u,o),c,l,v=0,_=n.interpolate||xe,m="__p += '",C=Gr((n.escape||xe).source+"|"+_.source+"|"+(_===Xi?Po:xe).source+"|"+(n.evaluate||xe).source+"|$","g"),I="//# sourceURL="+(F.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qo+"]")+`
`;t.replace(C,function(S,D,$,gt,ut,vt){return $||($=gt),m+=t.slice(v,vt).replace(So,_f),D&&(c=!0,m+=`' +
__e(`+D+`) +
'`),ut&&(l=!0,m+=`';
`+ut+`;
__p += '`),$&&(m+=`' +
((__t = (`+$+`)) == null ? '' : __t) +
'`),v=vt+S.length,S}),m+=`';
`;var y=F.call(n,"variable")&&n.variable;if(!y)m=`with (obj) {
`+m+`
}
`;else if(mo.test(y))throw new O(k);m=(l?m.replace(no,""):m).replace(eo,"$1").replace(ro,"$1;"),m="function("+(y||"obj")+`) {
`+(y?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var L=wa(function(){return q(o,I+"return "+m).apply(i,f)});if(L.source=m,yi(L))throw L;return L}function Gd(t){return U(t).toLowerCase()}function Kd(t){return U(t).toUpperCase()}function zd(t,n,e){if(t=U(t),t&&(e||n===i))return Os(t);if(!t||!(n=pt(n)))return t;var r=Ot(t),u=Ot(n),o=Rs(r,u),f=bs(r,u)+1;return cn(r,o,f).join("")}function Jd(t,n,e){if(t=U(t),t&&(e||n===i))return t.slice(0,Ls(t)+1);if(!t||!(n=pt(n)))return t;var r=Ot(t),u=bs(r,Ot(n))+1;return cn(r,0,u).join("")}function Yd(t,n,e){if(t=U(t),t&&(e||n===i))return t.replace(yr,"");if(!t||!(n=pt(n)))return t;var r=Ot(t),u=Rs(r,Ot(n));return cn(r,u).join("")}function Zd(t,n){var e=Fa,r=Wa;if(z(n)){var u="separator"in n?n.separator:u;e="length"in n?T(n.length):e,r="omission"in n?pt(n.omission):r}t=U(t);var o=t.length;if(Dn(t)){var f=Ot(t);o=f.length}if(e>=o)return t;var c=e-Hn(r);if(c<1)return r;var l=f?cn(f,0,c).join(""):t.slice(0,c);if(u===i)return l+r;if(f&&(c+=l.length-c),Si(u)){if(t.slice(c).search(u)){var v,_=l;for(u.global||(u=Gr(u.source,U(Qi.exec(u))+"g")),u.lastIndex=0;v=u.exec(_);)var m=v.index;l=l.slice(0,m===i?c:m)}}else if(t.indexOf(pt(u),c)!=c){var C=l.lastIndexOf(u);C>-1&&(l=l.slice(0,C))}return l+r}function Xd(t){return t=U(t),t&&io.test(t)?t.replace(Yi,xf):t}var Qd=Bn(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),bi=Pu("toUpperCase");function ma(t,n,e){return t=U(t),n=e?i:n,n===i?wf(t)?Sf(t):cf(t):t.match(n)||[]}var wa=N(function(t,n){try{return ht(t,i,n)}catch(e){return yi(e)?e:new O(e)}}),Vd=Yt(function(t,n){return wt(n,function(e){e=Ut(e),zt(t,e,xi(t[e],t))}),t});function kd(t){var n=t==null?0:t.length,e=E();return t=n?K(t,function(r){if(typeof r[1]!="function")throw new Pt(R);return[e(r[0]),r[1]]}):[],N(function(r){for(var u=-1;++u<n;){var o=t[u];if(ht(o[0],this,r))return ht(o[1],this,r)}})}function jd(t){return xc(At(t,Lt))}function Ti(t){return function(){return t}}function tg(t,n){return t==null||t!==t?n:t}var ng=Au(),eg=Au(!0);function ct(t){return t}function Li(t){return ks(typeof t=="function"?t:At(t,Lt))}function rg(t){return tu(At(t,Lt))}function ig(t,n){return nu(t,At(n,Lt))}var sg=N(function(t,n){return function(e){return ce(e,t,n)}}),ug=N(function(t,n){return function(e){return ce(t,e,n)}});function Ni(t,n,e){var r=V(n),u=Je(n,r);e==null&&!(z(n)&&(u.length||!r.length))&&(e=n,n=t,t=this,u=Je(n,V(n)));var o=!(z(e)&&"chain"in e)||!!e.chain,f=Xt(t);return wt(u,function(c){var l=n[c];t[c]=l,f&&(t.prototype[c]=function(){var v=this.__chain__;if(o||v){var _=t(this.__wrapped__),m=_.__actions__=at(this.__actions__);return m.push({func:l,args:arguments,thisArg:t}),_.__chain__=v,_}return l.apply(t,rn([this.value()],arguments))})}),t}function ag(){return j._===this&&(j._=Nf),this}function Di(){}function og(t){return t=T(t),N(function(n){return eu(n,t)})}var fg=hi(K),cg=hi(Is),hg=hi($r);function Pa(t){return mi(t)?qr(Ut(t)):Mc(t)}function lg(t){return function(n){return t==null?i:Pn(t,n)}}var pg=xu(),dg=xu(!0);function Hi(){return[]}function $i(){return!1}function gg(){return{}}function vg(){return""}function _g(){return!0}function mg(t,n){if(t=T(t),t<1||t>nn)return[];var e=Ht,r=et(t,Ht);n=E(n),t-=Ht;for(var u=Wr(r,n);++e<t;)n(e);return u}function wg(t){return b(t)?K(t,Ut):dt(t)?[t]:at(Wu(U(t)))}function Pg(t){var n=++Tf;return U(t)+n}var Cg=ke(function(t,n){return t+n},0),Ag=li("ceil"),Ig=ke(function(t,n){return t/n},1),xg=li("floor");function Eg(t){return t&&t.length?ze(t,ct,Vr):i}function yg(t,n){return t&&t.length?ze(t,E(n,2),Vr):i}function Sg(t){return ys(t,ct)}function Og(t,n){return ys(t,E(n,2))}function Rg(t){return t&&t.length?ze(t,ct,ni):i}function bg(t,n){return t&&t.length?ze(t,E(n,2),ni):i}var Tg=ke(function(t,n){return t*n},1),Lg=li("round"),Ng=ke(function(t,n){return t-n},0);function Dg(t){return t&&t.length?Fr(t,ct):0}function Hg(t,n){return t&&t.length?Fr(t,E(n,2)):0}return a.after=rp,a.ary=Vu,a.assign=Kp,a.assignIn=ha,a.assignInWith=hr,a.assignWith=zp,a.at=Jp,a.before=ku,a.bind=xi,a.bindAll=Vd,a.bindKey=ju,a.castArray=gp,a.chain=Zu,a.chunk=xh,a.compact=Eh,a.concat=yh,a.cond=kd,a.conforms=jd,a.constant=Ti,a.countBy=Dl,a.create=Yp,a.curry=ta,a.curryRight=na,a.debounce=ea,a.defaults=Zp,a.defaultsDeep=Xp,a.defer=ip,a.delay=sp,a.difference=Sh,a.differenceBy=Oh,a.differenceWith=Rh,a.drop=bh,a.dropRight=Th,a.dropRightWhile=Lh,a.dropWhile=Nh,a.fill=Dh,a.filter=$l,a.flatMap=Fl,a.flatMapDeep=Wl,a.flatMapDepth=Ml,a.flatten=Ku,a.flattenDeep=Hh,a.flattenDepth=$h,a.flip=up,a.flow=ng,a.flowRight=eg,a.fromPairs=qh,a.functions=ed,a.functionsIn=rd,a.groupBy=Bl,a.initial=Fh,a.intersection=Wh,a.intersectionBy=Mh,a.intersectionWith=Bh,a.invert=sd,a.invertBy=ud,a.invokeMap=Kl,a.iteratee=Li,a.keyBy=zl,a.keys=V,a.keysIn=ft,a.map=sr,a.mapKeys=od,a.mapValues=fd,a.matches=rg,a.matchesProperty=ig,a.memoize=ar,a.merge=cd,a.mergeWith=la,a.method=sg,a.methodOf=ug,a.mixin=Ni,a.negate=or,a.nthArg=og,a.omit=hd,a.omitBy=ld,a.once=ap,a.orderBy=Jl,a.over=fg,a.overArgs=op,a.overEvery=cg,a.overSome=hg,a.partial=Ei,a.partialRight=ra,a.partition=Yl,a.pick=pd,a.pickBy=pa,a.property=Pa,a.propertyOf=lg,a.pull=Jh,a.pullAll=Ju,a.pullAllBy=Yh,a.pullAllWith=Zh,a.pullAt=Xh,a.range=pg,a.rangeRight=dg,a.rearg=fp,a.reject=Ql,a.remove=Qh,a.rest=cp,a.reverse=Ai,a.sampleSize=kl,a.set=gd,a.setWith=vd,a.shuffle=jl,a.slice=Vh,a.sortBy=ep,a.sortedUniq=il,a.sortedUniqBy=sl,a.split=Fd,a.spread=hp,a.tail=ul,a.take=al,a.takeRight=ol,a.takeRightWhile=fl,a.takeWhile=cl,a.tap=El,a.throttle=lp,a.thru=ir,a.toArray=oa,a.toPairs=da,a.toPairsIn=ga,a.toPath=wg,a.toPlainObject=ca,a.transform=_d,a.unary=pp,a.union=hl,a.unionBy=ll,a.unionWith=pl,a.uniq=dl,a.uniqBy=gl,a.uniqWith=vl,a.unset=md,a.unzip=Ii,a.unzipWith=Yu,a.update=wd,a.updateWith=Pd,a.values=zn,a.valuesIn=Cd,a.without=_l,a.words=ma,a.wrap=dp,a.xor=ml,a.xorBy=wl,a.xorWith=Pl,a.zip=Cl,a.zipObject=Al,a.zipObjectDeep=Il,a.zipWith=xl,a.entries=da,a.entriesIn=ga,a.extend=ha,a.extendWith=hr,Ni(a,a),a.add=Cg,a.attempt=wa,a.camelCase=Ed,a.capitalize=va,a.ceil=Ag,a.clamp=Ad,a.clone=vp,a.cloneDeep=mp,a.cloneDeepWith=wp,a.cloneWith=_p,a.conformsTo=Pp,a.deburr=_a,a.defaultTo=tg,a.divide=Ig,a.endsWith=yd,a.eq=bt,a.escape=Sd,a.escapeRegExp=Od,a.every=Hl,a.find=ql,a.findIndex=Bu,a.findKey=Qp,a.findLast=Ul,a.findLastIndex=Gu,a.findLastKey=Vp,a.floor=xg,a.forEach=Xu,a.forEachRight=Qu,a.forIn=kp,a.forInRight=jp,a.forOwn=td,a.forOwnRight=nd,a.get=Oi,a.gt=Cp,a.gte=Ap,a.has=id,a.hasIn=Ri,a.head=zu,a.identity=ct,a.includes=Gl,a.indexOf=Uh,a.inRange=Id,a.invoke=ad,a.isArguments=In,a.isArray=b,a.isArrayBuffer=Ip,a.isArrayLike=ot,a.isArrayLikeObject=Y,a.isBoolean=xp,a.isBuffer=hn,a.isDate=Ep,a.isElement=yp,a.isEmpty=Sp,a.isEqual=Op,a.isEqualWith=Rp,a.isError=yi,a.isFinite=bp,a.isFunction=Xt,a.isInteger=ia,a.isLength=fr,a.isMap=sa,a.isMatch=Tp,a.isMatchWith=Lp,a.isNaN=Np,a.isNative=Dp,a.isNil=$p,a.isNull=Hp,a.isNumber=ua,a.isObject=z,a.isObjectLike=J,a.isPlainObject=ve,a.isRegExp=Si,a.isSafeInteger=qp,a.isSet=aa,a.isString=cr,a.isSymbol=dt,a.isTypedArray=Kn,a.isUndefined=Up,a.isWeakMap=Fp,a.isWeakSet=Wp,a.join=Gh,a.kebabCase=Rd,a.last=xt,a.lastIndexOf=Kh,a.lowerCase=bd,a.lowerFirst=Td,a.lt=Mp,a.lte=Bp,a.max=Eg,a.maxBy=yg,a.mean=Sg,a.meanBy=Og,a.min=Rg,a.minBy=bg,a.stubArray=Hi,a.stubFalse=$i,a.stubObject=gg,a.stubString=vg,a.stubTrue=_g,a.multiply=Tg,a.nth=zh,a.noConflict=ag,a.noop=Di,a.now=ur,a.pad=Ld,a.padEnd=Nd,a.padStart=Dd,a.parseInt=Hd,a.random=xd,a.reduce=Zl,a.reduceRight=Xl,a.repeat=$d,a.replace=qd,a.result=dd,a.round=Lg,a.runInContext=h,a.sample=Vl,a.size=tp,a.snakeCase=Ud,a.some=np,a.sortedIndex=kh,a.sortedIndexBy=jh,a.sortedIndexOf=tl,a.sortedLastIndex=nl,a.sortedLastIndexBy=el,a.sortedLastIndexOf=rl,a.startCase=Wd,a.startsWith=Md,a.subtract=Ng,a.sum=Dg,a.sumBy=Hg,a.template=Bd,a.times=mg,a.toFinite=Qt,a.toInteger=T,a.toLength=fa,a.toLower=Gd,a.toNumber=Et,a.toSafeInteger=Gp,a.toString=U,a.toUpper=Kd,a.trim=zd,a.trimEnd=Jd,a.trimStart=Yd,a.truncate=Zd,a.unescape=Xd,a.uniqueId=Pg,a.upperCase=Qd,a.upperFirst=bi,a.each=Xu,a.eachRight=Qu,a.first=zu,Ni(a,function(){var t={};return $t(a,function(n,e){F.call(a.prototype,e)||(t[e]=n)}),t}(),{chain:!1}),a.VERSION=p,wt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){a[t].placeholder=a}),wt(["drop","take"],function(t,n){H.prototype[t]=function(e){e=e===i?1:Q(T(e),0);var r=this.__filtered__&&!n?new H(this):this.clone();return r.__filtered__?r.__takeCount__=et(e,r.__takeCount__):r.__views__.push({size:et(e,Ht),type:t+(r.__dir__<0?"Right":"")}),r},H.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),wt(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==Ki||e==Ka;H.prototype[t]=function(u){var o=this.clone();return o.__iteratees__.push({iteratee:E(u,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),wt(["head","last"],function(t,n){var e="take"+(n?"Right":"");H.prototype[t]=function(){return this[e](1).value()[0]}}),wt(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");H.prototype[t]=function(){return this.__filtered__?new H(this):this[e](1)}}),H.prototype.compact=function(){return this.filter(ct)},H.prototype.find=function(t){return this.filter(t).head()},H.prototype.findLast=function(t){return this.reverse().find(t)},H.prototype.invokeMap=N(function(t,n){return typeof t=="function"?new H(this):this.map(function(e){return ce(e,t,n)})}),H.prototype.reject=function(t){return this.filter(or(E(t)))},H.prototype.slice=function(t,n){t=T(t);var e=this;return e.__filtered__&&(t>0||n<0)?new H(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(n=T(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},H.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},H.prototype.toArray=function(){return this.take(Ht)},$t(H.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),u=a[r?"take"+(n=="last"?"Right":""):n],o=r||/^find/.test(n);u&&(a.prototype[n]=function(){var f=this.__wrapped__,c=r?[1]:arguments,l=f instanceof H,v=c[0],_=l||b(f),m=function(D){var $=u.apply(a,rn([D],c));return r&&C?$[0]:$};_&&e&&typeof v=="function"&&v.length!=1&&(l=_=!1);var C=this.__chain__,I=!!this.__actions__.length,y=o&&!C,L=l&&!I;if(!o&&_){f=L?f:new H(this);var S=t.apply(f,c);return S.__actions__.push({func:ir,args:[m],thisArg:i}),new Ct(S,C)}return y&&L?t.apply(this,c):(S=this.thru(m),y?r?S.value()[0]:S.value():S)})}),wt(["pop","push","shift","sort","splice","unshift"],function(t){var n=be[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var u=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(b(o)?o:[],u)}return this[e](function(f){return n.apply(b(f)?f:[],u)})}}),$t(H.prototype,function(t,n){var e=a[n];if(e){var r=e.name+"";F.call(Fn,r)||(Fn[r]=[]),Fn[r].push({name:n,func:e})}}),Fn[Ve(i,pn).name]=[{name:"wrapper",func:i}],H.prototype.clone=Xf,H.prototype.reverse=Qf,H.prototype.value=Vf,a.prototype.at=yl,a.prototype.chain=Sl,a.prototype.commit=Ol,a.prototype.next=Rl,a.prototype.plant=Tl,a.prototype.reverse=Ll,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=Nl,a.prototype.first=a.prototype.head,re&&(a.prototype[re]=bl),a},$n=Of();gn?((gn.exports=$n)._=$n,Lr._=$n):j._=$n}).call(_e)})(Ui,Ui.exports);var Kg=Object.defineProperty,zg=Object.defineProperties,Jg=Object.getOwnPropertyDescriptors,Sa=Object.getOwnPropertySymbols,Yg=Object.prototype.hasOwnProperty,Zg=Object.prototype.propertyIsEnumerable,Oa=(P,s,i)=>s in P?Kg(P,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):P[s]=i,lr=(P,s)=>{for(var i in s||(s={}))Yg.call(s,i)&&Oa(P,i,s[i]);if(Sa)for(var i of Sa(s))Zg.call(s,i)&&Oa(P,i,s[i]);return P},Xg=(P,s)=>zg(P,Jg(s));function jt(P,s,i){var p;const w=nt.parseChainId(P);return((p=s.rpcMap)==null?void 0:p[w.reference])||`${Gg}?chainId=${w.namespace}:${w.reference}&projectId=${i}`}function xn(P){return P.includes(":")?P.split(":")[1]:P}function Ra(P){return P.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)}function Qg(P,s){const i=Object.keys(s.namespaces).filter(w=>w.includes(P));if(!i.length)return[];const p=[];return i.forEach(w=>{const x=s.namespaces[w].accounts;p.push(...x)}),p}function Fi(P={},s={}){const i=ba(P),p=ba(s);return Ui.exports.merge(i,p)}function ba(P){var s,i,p,w;const x={};if(!nt.isValidObject(P))return x;for(const[R,k]of Object.entries(P)){const tn=nt.isCaipNamespace(R)?[R]:k.chains,Yn=k.methods||[],En=k.events||[],Lt=k.rpcMap||{},Wt=nt.parseNamespaceKey(R);x[Wt]=Xg(lr(lr({},x[Wt]),k),{chains:nt.mergeArrays(tn,(s=x[Wt])==null?void 0:s.chains),methods:nt.mergeArrays(Yn,(i=x[Wt])==null?void 0:i.methods),events:nt.mergeArrays(En,(p=x[Wt])==null?void 0:p.events),rpcMap:lr(lr({},Lt),(w=x[Wt])==null?void 0:w.rpcMap)})}return x}function Vg(P){return P.includes(":")?P.split(":")[2]:P}function Ta(P){const s={};for(const[i,p]of Object.entries(P)){const w=p.methods||[],x=p.events||[],R=p.accounts||[],k=nt.isCaipNamespace(i)?[i]:p.chains?p.chains:Ra(p.accounts);s[i]={chains:k,methods:w,events:x,accounts:R}}return s}function Wi(P){return typeof P=="number"?P:P.includes("0x")?parseInt(P,16):(P=P.includes(":")?P.split(":")[1]:P,isNaN(Number(P))?P:Number(P))}const La={},M=P=>La[P],Mi=(P,s)=>{La[P]=s};class kg{constructor(s){this.name="polkadot",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getAccounts(){const s=this.namespace.accounts;return s?s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=xn(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}var jg=Object.defineProperty,tv=Object.defineProperties,nv=Object.getOwnPropertyDescriptors,Na=Object.getOwnPropertySymbols,ev=Object.prototype.hasOwnProperty,rv=Object.prototype.propertyIsEnumerable,Da=(P,s,i)=>s in P?jg(P,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):P[s]=i,Ha=(P,s)=>{for(var i in s||(s={}))ev.call(s,i)&&Da(P,i,s[i]);if(Na)for(var i of Na(s))rv.call(s,i)&&Da(P,i,s[i]);return P},$a=(P,s)=>tv(P,nv(s));class iv{constructor(s){this.name="eip155",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(s){switch(s.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(s);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(s)}return this.namespace.methods.includes(s.request.method)?await this.client.request(s):this.getHttpProvider().request(s.request)}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(parseInt(s),i),this.chainId=parseInt(s),this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}createHttpProvider(s,i){const p=i||jt(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new xa.HttpConnection(p,M("disableProviderPing")))}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=parseInt(xn(i));s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}getHttpProvider(){const s=this.chainId,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}async handleSwitchChain(s){var i,p;let w=s.request.params?(i=s.request.params[0])==null?void 0:i.chainId:"0x0";w=w.startsWith("0x")?w:`0x${w}`;const x=parseInt(w,16);if(this.isChainApproved(x))this.setDefaultChain(`${x}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:s.topic,request:{method:s.request.method,params:[{chainId:w}]},chainId:(p=this.namespace.chains)==null?void 0:p[0]}),this.setDefaultChain(`${x}`);else throw new Error(`Failed to switch to chain 'eip155:${x}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(s){return this.namespace.chains.includes(`${this.name}:${s}`)}async getCapabilities(s){var i,p,w;const x=(p=(i=s.request)==null?void 0:i.params)==null?void 0:p[0];if(!x)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const R=this.client.session.get(s.topic),k=((w=R?.sessionProperties)==null?void 0:w.capabilities)||{};if(k!=null&&k[x])return k?.[x];const tn=await this.client.request(s);try{await this.client.session.update(s.topic,{sessionProperties:$a(Ha({},R.sessionProperties||{}),{capabilities:$a(Ha({},k||{}),{[x]:tn})})})}catch(Yn){console.warn("Failed to update session with capabilities",Yn)}return tn}}class sv{constructor(s){this.name="solana",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=xn(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}class uv{constructor(s){this.name="cosmos",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=xn(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}class av{constructor(s){this.name="cip34",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{const p=this.getCardanoRPCUrl(i),w=xn(i);s[w]=this.createHttpProvider(w,p)}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}getCardanoRPCUrl(s){const i=this.namespace.rpcMap;if(i)return i[s]}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||this.getCardanoRPCUrl(s);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}class ov{constructor(s){this.name="elrond",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=xn(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}class fv{constructor(s){this.name="multiversx",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=xn(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}class cv{constructor(s){this.name="near",this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){if(this.chainId=s,!this.httpProviders[s]){const p=i||jt(`${this.name}:${s}`,this.namespace);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,p)}this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const s=this.namespace.accounts;return s?s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;s[i]=this.createHttpProvider(i,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace);return typeof p>"u"?void 0:new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}class hv{constructor(s){this.name=Jn,this.namespace=s.namespace,this.events=M("events"),this.client=M("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(s.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(s.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(s.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(s.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider(s.chainId).request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Ft.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){var s,i;const p={};return(i=(s=this.namespace)==null?void 0:s.accounts)==null||i.forEach(w=>{const x=nt.parseChainId(w);p[`${x.namespace}:${x.reference}`]=this.createHttpProvider(w)}),p}getHttpProvider(s){const i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||jt(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new kt.JsonRpcProvider(new ln.default(p,M("disableProviderPing")))}}var lv=Object.defineProperty,pv=Object.defineProperties,dv=Object.getOwnPropertyDescriptors,qa=Object.getOwnPropertySymbols,gv=Object.prototype.hasOwnProperty,vv=Object.prototype.propertyIsEnumerable,Ua=(P,s,i)=>s in P?lv(P,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):P[s]=i,pr=(P,s)=>{for(var i in s||(s={}))gv.call(s,i)&&Ua(P,i,s[i]);if(qa)for(var i of qa(s))vv.call(s,i)&&Ua(P,i,s[i]);return P},Bi=(P,s)=>pv(P,dv(s));class dr{constructor(s){this.events=new Fg.default,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=s,this.logger=typeof s?.logger<"u"&&typeof s?.logger!="string"?s.logger:Ia.pino(Ia.getDefaultLoggerOptions({level:s?.logger||Ea})),this.disableProviderPing=s?.disableProviderPing||!1}static async init(s){const i=new dr(s);return await i.initialize(),i}async request(s,i,p){const[w,x]=this.validateChain(i);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(w).request({request:pr({},s),chainId:`${w}:${x}`,topic:this.session.topic,expiry:p})}sendAsync(s,i,p,w){const x=new Date().getTime();this.request(s,p,w).then(R=>i(null,qg.formatJsonRpcResult(x,R))).catch(R=>i(R,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var s;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(s=this.session)==null?void 0:s.topic,reason:nt.getSdkError("USER_DISCONNECTED")}),await this.cleanup()}async connect(s){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(s),await this.cleanupPendingPairings(),!s.skipPairing)return await this.pair(s.pairingTopic)}async authenticate(s){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(s),await this.cleanupPendingPairings();const{uri:i,response:p}=await this.client.authenticate(s);i&&(this.uri=i,this.events.emit("display_uri",i));const w=await p();if(this.session=w.session,this.session){const x=Ta(this.session.namespaces);this.namespaces=Fi(this.namespaces,x),this.persist("namespaces",this.namespaces),this.onConnect()}return w}on(s,i){this.events.on(s,i)}once(s,i){this.events.once(s,i)}removeListener(s,i){this.events.removeListener(s,i)}off(s,i){this.events.off(s,i)}get isWalletConnect(){return!0}async pair(s){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:p,approval:w}=await this.client.connect({pairingTopic:s,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});p&&(this.uri=p,this.events.emit("display_uri",p)),await w().then(x=>{this.session=x;const R=Ta(x.namespaces);this.namespaces=Fi(this.namespaces,R),this.persist("namespaces",this.namespaces)}).catch(x=>{if(x.message!==Aa.PROPOSAL_EXPIRY_MESSAGE)throw x;i++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(s,i){try{if(!this.session)return;const[p,w]=this.validateChain(s),x=this.getProvider(p);x.name===Jn?x.setDefaultChain(`${p}:${w}`,i):x.setDefaultChain(w,i)}catch(p){if(!/Please call connect/.test(p.message))throw p}}async cleanupPendingPairings(s={}){this.logger.info("Cleaning up inactive pairings...");const i=this.client.pairing.getAll();if(nt.isValidArray(i)){for(const p of i)s.deletePairings?this.client.core.expirer.set(p.topic,0):await this.client.core.relayer.subscriber.unsubscribe(p.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const s=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[s]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Ug.default.init({logger:this.providerOpts.logger||Ea,relayUrl:this.providerOpts.relayUrl||Wg,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const s=[...new Set(Object.keys(this.session.namespaces).map(i=>nt.parseNamespaceKey(i)))];Mi("client",this.client),Mi("events",this.events),Mi("disableProviderPing",this.disableProviderPing),s.forEach(i=>{if(!this.session)return;const p=Qg(i,this.session),w=Ra(p),x=Fi(this.namespaces,this.optionalNamespaces),R=Bi(pr({},x[i]),{accounts:p,chains:w});switch(i){case"eip155":this.rpcProviders[i]=new iv({namespace:R});break;case"solana":this.rpcProviders[i]=new sv({namespace:R});break;case"cosmos":this.rpcProviders[i]=new uv({namespace:R});break;case"polkadot":this.rpcProviders[i]=new kg({namespace:R});break;case"cip34":this.rpcProviders[i]=new av({namespace:R});break;case"elrond":this.rpcProviders[i]=new ov({namespace:R});break;case"multiversx":this.rpcProviders[i]=new fv({namespace:R});break;case"near":this.rpcProviders[i]=new cv({namespace:R});break;default:this.rpcProviders[Jn]?this.rpcProviders[Jn].updateNamespace(R):this.rpcProviders[Jn]=new hv({namespace:R})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",s=>{this.events.emit("session_ping",s)}),this.client.on("session_event",s=>{const{params:i}=s,{event:p}=i;if(p.name==="accountsChanged"){const w=p.data;w&&nt.isValidArray(w)&&this.events.emit("accountsChanged",w.map(Vg))}else if(p.name==="chainChanged"){const w=i.chainId,x=i.event.data,R=nt.parseNamespaceKey(w),k=Wi(w)!==Wi(x)?`${R}:${Wi(x)}`:w;this.onChainChanged(k)}else this.events.emit(p.name,p.data);this.events.emit("session_event",s)}),this.client.on("session_update",({topic:s,params:i})=>{var p;const{namespaces:w}=i,x=(p=this.client)==null?void 0:p.session.get(s);this.session=Bi(pr({},x),{namespaces:w}),this.onSessionUpdate(),this.events.emit("session_update",{topic:s,params:i})}),this.client.on("session_delete",async s=>{await this.cleanup(),this.events.emit("session_delete",s),this.events.emit("disconnect",Bi(pr({},nt.getSdkError("USER_DISCONNECTED")),{data:s.topic}))}),this.on(Ft.DEFAULT_CHAIN_CHANGED,s=>{this.onChainChanged(s,!0)})}getProvider(s){return this.rpcProviders[s]||this.rpcProviders[Jn]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(s=>{var i;this.getProvider(s).updateNamespace((i=this.session)==null?void 0:i.namespaces[s])})}setNamespaces(s){const{namespaces:i,optionalNamespaces:p,sessionProperties:w}=s;i&&Object.keys(i).length&&(this.namespaces=i),p&&Object.keys(p).length&&(this.optionalNamespaces=p),this.sessionProperties=w,this.persist("namespaces",i),this.persist("optionalNamespaces",p)}validateChain(s){const[i,p]=s?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,p];if(i&&!Object.keys(this.namespaces||{}).map(R=>nt.parseNamespaceKey(R)).includes(i))throw new Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&p)return[i,p];const w=nt.parseNamespaceKey(Object.keys(this.namespaces)[0]),x=this.rpcProviders[w].getDefaultChain();return[w,x]}async requestAccounts(){const[s]=this.validateChain();return await this.getProvider(s).requestAccounts()}onChainChanged(s,i=!1){if(!this.namespaces)return;const[p,w]=this.validateChain(s);w&&(i||this.getProvider(p).setDefaultChain(w),this.namespaces[p]?this.namespaces[p].defaultChain=w:this.namespaces[`${p}:${w}`]?this.namespaces[`${p}:${w}`].defaultChain=w:this.namespaces[`${p}:${w}`]={defaultChain:w},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",w))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(s,i){this.client.core.storage.setItem(`${ya}/${s}`,i)}async getFromStore(s){return await this.client.core.storage.getItem(`${ya}/${s}`)}}const _v=dr;exports.UniversalProvider=_v,exports.default=dr;
//# sourceMappingURL=index.cjs.js.map
